

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>swapnodes.1 &mdash; xCAT 2.12 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="xCAT 2.12 documentation" href="../../../../index.html"/>
        <link rel="up" title="man1" href="index.html"/>
        <link rel="next" title="switchblade.1" href="switchblade.1.html"/>
        <link rel="prev" title="snmove.1" href="snmove.1.html"/> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> xCAT
          

          
          </a>

          
            
            
              <div class="version">
                2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install-guides/index.html">Install Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Admin Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../basic_concepts/index.html">Basic Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../manage_clusters/index.html">Manage Clusters</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">References</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#xcat-man-pages">xCAT Man Pages</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="index.html">man1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man3/index.html">man3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man5/index.html">man5</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man7/index.html">man7</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man8/index.html">man8</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#xcat-tools">xCAT Tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../advanced/index.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developers/index.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../help.html">Need Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../security/index.html">Security Notices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../index.html">xCAT</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Admin Guide</a> &raquo;</li>
      
          <li><a href="../index.html">References</a> &raquo;</li>
      
          <li><a href="index.html">man1</a> &raquo;</li>
      
    <li>swapnodes.1</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/guides/admin-guides/references/man1/swapnodes.1.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="swapnodes-1">
<h1>swapnodes.1<a class="headerlink" href="#swapnodes-1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="name">
<h2>NAME<a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h2>
<p><strong>swapnodes</strong> - swap the location info in the db (all the attributes in the ppc table and the nodepos table) between 2 nodes. If swapping within a cec, it will assign the IO adapters that were assigned to the defective node to the available node.</p>
</div>
<div class="section" id="synopsis">
<h2>SYNOPSIS<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p><strong>swapnodes</strong> [<strong>-h</strong>| <strong>-</strong><strong>-help</strong>]</p>
<p><strong>swapnodes</strong> <strong>-c</strong> <em>current_node</em> <strong>-f</strong> <em>fip_node</em> [<strong>-o</strong>]</p>
</div>
<div class="section" id="description">
<h2>DESCRIPTION<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This command is only for Power 775 using Direct FSP Management, and used in Power 775 Availability Plus.</p>
<p>The <strong>swapnodes</strong> command will keep the <strong>current_node</strong> name in the xCAT table, and use the <em>fip_node</em>&#8216;s hardware resource. Besides that, the IO adapters will be assigned to the new hardware resource if they are in the same CEC. So the swapnodes command will do 2 things:</p>
<ol class="arabic simple">
<li>Swap the location info in the db between 2 nodes:</li>
</ol>
<p>All the ppc table attributes (including hcp, id, parent, supernode and so on).
All the nodepos table attributes(including rack, u, chassis, slot, room and so on).</p>
<ol class="arabic simple" start="2">
<li>Assign the I/O adapters from the defective node(the original current_node) to the available node(the original fip_node) if the nodes are in the same cec.</li>
</ol>
<p>The <strong>swapnodes</strong> command shouldn&#8217;t make the decision of which 2 nodes are swapped. It will just received the 2 node names as cmd line parameters.</p>
<p>After running <strong>swapnodes</strong> command, the order of the I/O devices may be changed after IO re-assignment, so the administrator needs to run <strong>rbootseq</strong> to set the boot string for the current_node. And then boot the node with the same image and same postscripts because they have the same attributes.</p>
<p>Without <strong>-o</strong> option, it&#8217;s used to swap the location info in the db between 2 nodes. With <strong>-o</strong> option, it&#8217;s used to move the <em>current_node</em> definition to <em>fip_node</em> (the 2nd octant), not move the <em>fip_node</em> definition to the 1st octant. If the two nodes are in a cec, it will assign the IO adapters that were assigned to the defective node to the available node. Originally, the <em>current_node</em> is a defective non-compute node, and <em>fip_node</em> is a avaible compute node. After the swapping, the <em>current_node</em> will be a available node.</p>
</div>
<div class="section" id="options">
<h2>OPTIONS<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<p><strong>-h|-</strong><strong>-help</strong></p>
<blockquote>
<div>Display usage message.</div></blockquote>
<p><strong>-c</strong></p>
<blockquote>
<div><em>current_node</em> &#8211; the defective non-compute node.</div></blockquote>
<p><strong>-f</strong></p>
<blockquote>
<div><em>fip_node</em> &#8211; a compute node which will be swapped as the non-compute node.</div></blockquote>
<p><strong>-o</strong></p>
<blockquote>
<div>one way. Only move the <em>current_node</em> definition to the <em>fip_node</em>&#8216;s hardware resource, and not move the fip_node definition to the <em>current_node</em>. And then the <em>current_node</em> will use the <em>fip_node</em>&#8216;s hardware resource, and the <em>fip_node</em> definition is not changed. if the two nodes are in the same CEC, the I/O adapter from the original <em>current_node</em> will be assigned to the <em>fip_node</em>.</div></blockquote>
</div>
<div class="section" id="return-value">
<h2>RETURN VALUE<a class="headerlink" href="#return-value" title="Permalink to this headline">¶</a></h2>
<p>0 The command completed successfully.</p>
<p>1 An error has occurred.</p>
</div>
<div class="section" id="examples">
<h2>EXAMPLES<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>To swap the service node attributes and IO assignments between sn1 and compute2 which are in the same cec, all the attributes in the ppc table and nodepos talbe of the two node will be swapped, and the the I/O adapters from the defective node (the original sn1) will be assigned to the available node (the original compute2). After the swapping, the sn1 will use the compute2&#8217;s hardware resource and the I/O adapters from the original sn1.</li>
</ol>
<blockquote>
<div><div class="highlight-perl"><div class="highlight"><pre><span class="n">swapnodes</span> <span class="o">-</span><span class="n">c</span> <span class="n">sn1</span> <span class="o">-</span><span class="n">f</span> <span class="n">compute2</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>To swap the service node attributes and IO assignments between sn1 and compute2 which are NOT in the same cec, all the attributes in the ppc table and nodepos talbe of the two node will be swapped. After the swapping, the sn1 will use the compute2&#8217;s hardware resource.</li>
</ol>
<blockquote>
<div><div class="highlight-perl"><div class="highlight"><pre><span class="n">swapnodes</span> <span class="o">-</span><span class="n">c</span> <span class="n">sn1</span> <span class="o">-</span><span class="n">f</span> <span class="n">compute2</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Only to move the service node (sn1) definition to the compute node (compute2)&#8217;s hardware resource, and not move the compute2 definition to the sn1. After the swapping, the sn1 will use the compute2&#8217;s hardware resource, and the compute2 definition is not changed.</li>
</ol>
<blockquote>
<div><div class="highlight-perl"><div class="highlight"><pre><span class="n">swapnodes</span> <span class="o">-</span><span class="n">c</span> <span class="n">sn1</span> <span class="o">-</span><span class="n">f</span> <span class="n">compute2</span> <span class="o">-</span><span class="n">o</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="files">
<h2>FILES<a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h2>
<p>$XCATROOT/bin/swapnodes</p>
<p>(The XCATROOT environment variable is set when xCAT is installed. The
default value is &#8220;/opt/xcat&#8221;.)</p>
</div>
<div class="section" id="notes">
<h2>NOTES<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<p>This command is part of the xCAT software product.</p>
</div>
<div class="section" id="see-also">
<h2>SEE ALSO<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<p>lsvm(1)|lsvm.1, mkvm(1)|mkvm.1, chvm(1)|chvm.1</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="switchblade.1.html" class="btn btn-neutral float-right" title="switchblade.1" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="snmove.1.html" class="btn btn-neutral" title="snmove.1" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, IBM Corporation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'2.12',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>