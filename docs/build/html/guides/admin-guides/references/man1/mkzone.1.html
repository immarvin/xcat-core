

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mkzone.1 &mdash; xCAT 2.12 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="xCAT 2.12 documentation" href="../../../../index.html"/>
        <link rel="up" title="man1" href="index.html"/>
        <link rel="next" title="monadd.1" href="monadd.1.html"/>
        <link rel="prev" title="mkvm.1" href="mkvm.1.html"/> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> xCAT
          

          
          </a>

          
            
            
              <div class="version">
                2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install-guides/index.html">Install Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Admin Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../basic_concepts/index.html">Basic Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../manage_clusters/index.html">Manage Clusters</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">References</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#xcat-man-pages">xCAT Man Pages</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="index.html">man1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man3/index.html">man3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man5/index.html">man5</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man7/index.html">man7</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man8/index.html">man8</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#xcat-tools">xCAT Tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../advanced/index.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developers/index.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../help.html">Need Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../security/index.html">Security Notices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../index.html">xCAT</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Admin Guide</a> &raquo;</li>
      
          <li><a href="../index.html">References</a> &raquo;</li>
      
          <li><a href="index.html">man1</a> &raquo;</li>
      
    <li>mkzone.1</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/guides/admin-guides/references/man1/mkzone.1.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mkzone-1">
<h1>mkzone.1<a class="headerlink" href="#mkzone-1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="name">
<h2><strong>NAME</strong><a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h2>
<p><strong>mkzone</strong> - Defines a new zone in the cluster.</p>
</div>
<div class="section" id="synopsis">
<h2><strong>SYNOPSIS</strong><a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p><strong>mkzone</strong> <em>zonename</em>  [<strong>-</strong><strong>-defaultzone</strong>] [<strong>-k</strong> <em>full path to the ssh RSA private key</em>] [<strong>-a</strong> <em>noderange</em>] [<strong>-g</strong>] [<strong>-f</strong>] [<strong>-s</strong> <em>{yes|no}</em>] [<strong>-V</strong>]</p>
<p><strong>mkzone</strong> [<strong>-h</strong> | <strong>-v</strong>]</p>
</div>
<div class="section" id="description">
<h2><strong>DESCRIPTION</strong><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The <strong>mkzone</strong> command is designed to divide the xCAT cluster into multiple zones. The nodes in each zone will share common root ssh keys. This allows the nodes in a zone to be able to as root ssh to each other without password, but cannot do the same to any node in another zone. All zones share a common xCAT Management Node and database including the site table, which defines the attributes of the entire cluster.
The mkzone command is only supported on Linux ( No AIX support).
The nodes are not updated with the new root ssh keys by mkzone.  You must run updatenode -k  or xdsh -K to the nodes to update the root ssh keys to the new generated zone keys. This will also sync any service nodes with the zone keys, if you have a hierarchical cluster.
Note: if any zones in the zone table, there must be one and only one defaultzone. Otherwise, errors will occur.</p>
</div>
<div class="section" id="options">
<h2><strong>OPTIONS</strong><a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<p><strong>-h | -</strong><strong>-help</strong></p>
<blockquote>
<div>Displays usage information.</div></blockquote>
<p><strong>-v | -</strong><strong>-version</strong></p>
<blockquote>
<div>Displays command version and build date.</div></blockquote>
<p><strong>-k | -</strong><strong>-sshkeypath</strong> <em>full path to the ssh RSA private key</em></p>
<blockquote>
<div>This is the path to the id_rsa key that will be used to build root&#8217;s ssh keys for the zone. If -k is used, it will generate the ssh public key from the input ssh RSA private key and store both in /etc/xcat/sshkeys/&lt;zonename&gt;/.ssh directory.
If -f is not used,  then it will generate a set of root ssh keys for the zone and store them in /etc/xcat/sshkeys/&lt;zonename&gt;/.ssh.</div></blockquote>
<p><strong>-</strong><strong>-default</strong></p>
<blockquote>
<div>if &#8211;defaultzone is input, then it will set the zone defaultzone attribute to yes; otherwise it will set to no.
if &#8211;defaultzone is input and another zone is currently the default,
then the -f flag must be used to force a change to the new defaultzone.
If -f flag is not use an error will be returned and no change made.
Note: if any zones in the zone table, there must be one and only one defaultzone. Otherwise, errors will occur.</div></blockquote>
<p><strong>-a | -</strong><strong>-addnoderange</strong> <em>noderange</em></p>
<blockquote>
<div>For each node in the noderange, it will set the zonename attribute for that node to the input zonename.
If the -g flag is also on the command, then
it will add the group name &#8220;zonename&#8221; to each node in the noderange.</div></blockquote>
<p><strong>-s| -</strong><strong>-sshbetweennodes</strong> <strong>yes|no</strong></p>
<blockquote>
<div>If -s entered, the zone sshbetweennodes attribute will be set to yes or no. It defaults to yes. When this is set to yes, then ssh will be setup
to allow passwordless root access between nodes.  If no, then root will be prompted for a password when running ssh between the nodes in the zone.</div></blockquote>
<p><strong>-f | -</strong><strong>-force</strong></p>
<blockquote>
<div>Used with the (&#8211;defaultzone) flag to override the current default zone.</div></blockquote>
<p><strong>-g | -</strong><strong>-assigngroup</strong></p>
<blockquote>
<div>Used with the (-a) flag to create the group zonename for all nodes in the input noderange.</div></blockquote>
<p><strong>-V | -</strong><strong>-Verbose</strong></p>
<blockquote>
<div>Verbose mode.</div></blockquote>
</div>
<div class="section" id="examples">
<h2><strong>EXAMPLES</strong><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>To make a new zone1 using defaults, enter:</li>
</ol>
<blockquote>
<div><div class="highlight-perl"><div class="highlight"><pre><span class="n">mkzone</span> <span class="n">zone1</span>
</pre></div>
</div>
<p>Note: with the first <strong>mkzone</strong>, you will automatically get the xcatdefault zone created as the default zone.  This zone uses ssh keys from &lt;roothome&gt;/.ssh directory.</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>To make a new zone2 using defaults and make it the default zone enter:</li>
</ol>
<blockquote>
<div><div class="highlight-perl"><div class="highlight"><pre><span class="n">mkzone</span><span class="o">&gt;</span> <span class="n">zone2</span> <span class="o">--</span><span class="n">defaultzone</span> <span class="o">-</span><span class="n">f</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic" start="3">
<li><p class="first">To make a new zone2A using the ssh id_rsa private key in /root/.ssh:</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="n">mkzone</span> <span class="n">zone2A</span> <span class="o">-</span><span class="n">k</span> <span class="sr">/root/</span><span class="o">.</span><span class="n">ssh</span>
</pre></div>
</div>
</li>
<li><p class="first">To make a new zone3 and assign the noderange compute3 to the zone  enter:</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="n">mkzone</span> <span class="n">zone3</span> <span class="o">-</span><span class="n">a</span> <span class="n">compute3</span>
</pre></div>
</div>
</li>
<li><p class="first">To make a new zone4 and assign the noderange compute4 to the zone and add zone4 as a group to each node  enter:</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-perl"><div class="highlight"><pre><span class="n">mkzone</span> <span class="n">zone4</span> <span class="o">-</span><span class="n">a</span> <span class="n">compute4</span> <span class="o">-</span><span class="n">g</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic" start="6">
<li><p class="first">To make a new zone5 and assign the noderange compute5 to the zone and add zone5 as a group to each node but not allow passwordless ssh between the nodes  enter:</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="n">mkzone</span> <span class="n">zone5</span> <span class="o">-</span><span class="n">a</span> <span class="n">compute5</span> <span class="o">-</span><span class="n">g</span> <span class="o">-</span><span class="n">s</span> <span class="nb">no</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="files">
<h2><strong>Files</strong><a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h2>
<p>/opt/xcat/bin/mkzone/</p>
<p>Location of the mkzone command.</p>
</div>
<div class="section" id="see-also">
<h2><strong>SEE ALSO</strong><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<p>chzone(1)|chzone.1, rmzone(1)|rmzone.1, xdsh(1)|xdsh.1, updatenode(1)|updatenode.1</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="monadd.1.html" class="btn btn-neutral float-right" title="monadd.1" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="mkvm.1.html" class="btn btn-neutral" title="mkvm.1" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, IBM Corporation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'2.12',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>