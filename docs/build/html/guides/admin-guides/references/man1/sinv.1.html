

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>sinv.1 &mdash; xCAT 2.12 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="xCAT 2.12 documentation" href="../../../../index.html"/>
        <link rel="up" title="man1" href="index.html"/>
        <link rel="next" title="snmove.1" href="snmove.1.html"/>
        <link rel="prev" title="rvitals.1" href="rvitals.1.html"/> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> xCAT
          

          
          </a>

          
            
            
              <div class="version">
                2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install-guides/index.html">Install Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Admin Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../basic_concepts/index.html">Basic Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../manage_clusters/index.html">Manage Clusters</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">References</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#xcat-man-pages">xCAT Man Pages</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="index.html">man1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man3/index.html">man3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man5/index.html">man5</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man7/index.html">man7</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man8/index.html">man8</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#xcat-tools">xCAT Tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../advanced/index.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developers/index.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../help.html">Need Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../security/index.html">Security Notices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../index.html">xCAT</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Admin Guide</a> &raquo;</li>
      
          <li><a href="../index.html">References</a> &raquo;</li>
      
          <li><a href="index.html">man1</a> &raquo;</li>
      
    <li>sinv.1</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/guides/admin-guides/references/man1/sinv.1.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sinv-1">
<h1>sinv.1<a class="headerlink" href="#sinv-1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="name">
<h2><strong>NAME</strong><a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h2>
<p><strong>sinv</strong> - Checks the software configuration of the nodes in the cluster.</p>
</div>
<div class="section" id="synopsis">
<h2><strong>SYNOPSIS</strong><a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p><strong>sinv</strong>  [<strong>-o</strong> <em>output</em>] [<strong>-p</strong> <em>template path</em>] [<strong>-t</strong> <em>template count</em>] [<strong>-s</strong> <em>seed node</em>] [<strong>-i</strong>] [<strong>-e</strong>] [<strong>-r</strong>] [<strong>-V</strong>] [<strong>-</strong><strong>-devicetype</strong> <em>type_of_device</em>]  [<strong>-l</strong>  <em>userID</em>] [[<strong>-f</strong> <em>command file</em>] | [<strong>-c</strong> <em>command</em>]]</p>
<p><strong>sinv</strong> [<strong>-h</strong> | <strong>-v</strong>]</p>
</div>
<div class="section" id="description">
<h2><strong>DESCRIPTION</strong><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The <strong>sinv</strong> command is designed to check the configuration of the nodes in a cluster.
The command takes as input command line flags, and one or more templates which will be compared against the output of the xdsh command, designated to be run by the -c or -f flag, on the nodes in the noderange.</p>
<p>The nodes will then be grouped according to the template they match and a report returned to the administrator in the output file designated by the -o flag, or to stdout.</p>
<p><strong>sinv</strong> supports checking the output from the  <strong>rinv</strong> or <strong>xdsh</strong> command.</p>
<p>The <strong>sinv</strong> command is an xCAT Distributed Shell Utility.</p>
<p><strong>COMMAND</strong> <strong>SPECIFICATION</strong>:</p>
<p>The xdsh or rinv command to execute on the remote targets is specified by the <strong>-c</strong> flag, or by the <strong>-f</strong> flag
which is followed by the fully qualified path to a file containing the command.</p>
<p>Note: do not add | xdshcoll to the command on the command line or in the
command file, it is automatically added by sinv.</p>
<p>The syntax for the <strong>-c</strong>  <strong>sinv</strong> parameter is as follows:</p>
<p>&#8220;<em>command</em>[; <em>command</em>]...&#8221;</p>
<p>where <em>command</em> is the command to run on the remote
target. Quotation marks are required to ensure that all commands in the
list are executed remotely, and that any special characters are interpreted
correctly on the remote target.</p>
<p>The <strong>sinv</strong> command does not work with any interactive commands, including
those that read from standard input.</p>
<p><strong>REMOTE</strong> <strong>SHELL</strong> <strong>COMMAND</strong>:</p>
<p>For xdsh, support is  explicitly  provided
for  AIX  Remote  Shell and OpenSSH, but any secure remote command that
conforms to the IETF (Internet Engineering Task  Force)  Secure  Remote
Command Protocol can be used. See man <strong>xdsh</strong> for more details.</p>
</div>
<div class="section" id="options">
<h2><strong>OPTIONS</strong><a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<p><strong>-o | -</strong><strong>-output</strong> <em>report output file</em></p>
<blockquote>
<div>Optional output file. This is the location of the file that will contain the report of the nodes that match, and do not match, the input templates.
If the flag is not used, the output will go to stdout.</div></blockquote>
<p><strong>-p | -</strong><strong>-tp</strong> <em>template path</em></p>
<blockquote>
<div><p>This is the path to the template file. The template contains the output
of xdsh command, that has been run against a &#8220;seed&#8221; node, a node
that contains the configuration that you would like
all nodes in your noderange to match.</p>
<p>The admin can create the template by running the xdsh command on
the seed node, pipe to xdshcoll ( required) and store the output
in the template path. See examples.</p>
<p><strong>Note:</strong> The admin can also edit the
template to remove any lines that they do not want checked.</p>
<p>An alternative method is to use the [<strong>-s</strong> <em>seed node</em>] parameter,
which will automatically build the template for you from the
seed node named.</p>
<p>If a template path file does not exist, and a seed node is not input,
then sinv will automatically use the one node in the noderange as
the seed node and build the template.</p>
</div></blockquote>
<p><strong>-t | -</strong><strong>-tc</strong> <em>template count</em></p>
<blockquote>
<div><p>This count is the number of templates that the command will use
to check for nodes matches.  If the template in the template path does not
match a node, the <strong>sinv</strong> will check additional templates  up
to the template count.</p>
<p>For each node, it will compare the node against each template to see if
there is a match.
If there is no match, and we are not over the template count,
then a new template will be created from the node output.
This will result in having all nodes that match a given template reported in
their group at the end of the run in the output file.
If no template count is specified,  0 is the default, and all nodes will
be compared against the first template.</p>
</div></blockquote>
<p><strong>-s | -</strong><strong>-seed</strong> <em>seed node</em></p>
<blockquote>
<div><p>This is the node that will be used to build the first template
that is stored in template path.  You can use this parameter instead of running
the command yourself to build the template.</p>
<p><strong>Note:</strong> If the template path file does not exists, and no seed node is
supplied, the seed node automatically is one node in the
noderange.</p>
</div></blockquote>
<p><strong>-i | -</strong><strong>-ignorefirst</strong></p>
<blockquote>
<div>This flag suppresses the reporting of the nodes matching the first
template. In very large systems, you may not want to show the nodes that
have the correct configuration, since the list could contain thousands of nodes.
This allows you to only report the nodes that do not match the required
configuration.</div></blockquote>
<p><strong>-e | -</strong><strong>-exactmatch</strong></p>
<blockquote>
<div><p>This requires the check of node output against template to be an exact match.
If this flag is not set, <strong>sinv</strong> checks to see if the return from the
xdsh command to the nodes contain a match for each line in the input
template (except for xdshcoll header and comments). If not in exactmatch mode,
there can exist more lines in the xdsh return from the nodes.</p>
<p>For example, if running a &#8220;rpm -qa | grep xCAT&#8221; command, without exactmatch
set, if the node containes more xCAT rpms that listed in the template,
it would be considered a match, as long as all rpms listed in the template
were on the node. With exactmatch set, the output must be identical
to the template.</p>
</div></blockquote>
<p><strong>-</strong><strong>-devicetype</strong> <em>type_of_device</em></p>
<blockquote>
<div>Specify a user-defined device type that references the location
of relevant device configuration file. The devicetype value must
correspond to a valid device configuration file.
xCAT ships some default configuration files
for Ethernet switches and and IB switches under
<em>/opt/xcat/share/xcat/devicetype</em> directory. If you want to overwrite
any of the configuration files, copy them to <em>/var/opt/xcat/</em>directory and cutomize.
For example, <em>base/IBSwitch/Qlogic/config</em> is the configuration
file location if devicetype is specified as IBSwitch::Qlogic.
xCAT will first search config file using <em>/var/opt/xcat/</em> as the base.
If not found, it will search for it using
<em>/opt/xcat/share/xcat/devicetype/</em> as the base.</div></blockquote>
<p><strong>-l | -</strong><strong>-user</strong> <em>user_ID</em></p>
<blockquote>
<div>Specifies a remote user name to use for remote command execution.</div></blockquote>
<p><strong>-c | -</strong><strong>-command</strong></p>
<blockquote>
<div><p>The xdsh or rinv command that will be run. The command should be enclosed in
double quotes to insure correct shell interpretation. This parameter must only contain, the node range or the image path (Linux) or spot name for AIX. It cannot be used to set additional input flags to xdsh or rinv (for example -s,-T,-e).  See examples below.</p>
<p><strong>Note:</strong> do not add the | xdshcoll to the command,
it is automatically added by sinv.  sinv also automatically sets the -v flag for xdsh.</p>
</div></blockquote>
<p><strong>-f | -</strong><strong>-file</strong></p>
<blockquote>
<div><p>The file containing the xdsh or rinv command that will be run.
This should be the fully qualified name of the file.</p>
<p><strong>Note:</strong> do not add the | xdshcoll to the command in the file,
it is automatically added by sinv.</p>
</div></blockquote>
<p><strong>-r | -</strong><strong>-remove</strong></p>
<blockquote>
<div><p>This flag indicates that generated templates should be removed at the
at the end of the <strong>sinv</strong> command execution.</p>
<p>If the flag is input, then all templates that are generated by the <strong>sinv</strong>command, will be removed. If the first template is created by the admin,
it will not be removed.</p>
<p>If the flag is not input, no
templates will be removed. It is up to the admin to cleanup templates.</p>
</div></blockquote>
<p><strong>-h | -</strong><strong>-help</strong></p>
<blockquote>
<div>Displays usage information.</div></blockquote>
<p><strong>-v | -</strong><strong>-version</strong></p>
<blockquote>
<div>Displays xCAT release version.</div></blockquote>
<p><strong>-V | -</strong><strong>-Verbose</strong></p>
<blockquote>
<div>Verbose mode.</div></blockquote>
</div>
<div class="section" id="examples">
<h2><strong>Examples</strong><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>To setup sinv.template (name optional) for input to the <strong>sinv</strong> command , enter:</li>
</ol>
<blockquote>
<div><div class="highlight-perl"><div class="highlight"><pre><span class="n">xdsh</span> <span class="n">node1</span><span class="p">,</span><span class="n">node2</span> <span class="s">&quot;rpm -qa | grep ssh &quot;</span> <span class="o">|</span> <span class="n">xdshcoll</span>  <span class="o">&gt;</span> <span class="sr">/tmp/si</span><span class="n">nv</span><span class="o">.</span><span class="n">template</span>
</pre></div>
</div>
<p>Note: when setting up the template the output of xdsh must be piped to xdshcoll, sinv processing depends on it.</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>To setup rinv.template for input to the <strong>sinv</strong> command , enter:</li>
</ol>
<blockquote>
<div><div class="highlight-perl"><div class="highlight"><pre><span class="n">rinv</span> <span class="n">node1</span><span class="o">-</span><span class="n">node2</span> <span class="n">serial</span> <span class="o">|</span> <span class="n">xdshcoll</span>  <span class="o">&gt;</span> <span class="sr">/tmp/</span><span class="n">rinv</span><span class="o">.</span><span class="n">template</span>
</pre></div>
</div>
<p>Note: when setting up the template the output of rinv must be piped to xdshcoll, sinv processing depends on it.</p>
</div></blockquote>
<p>3. To execute <strong>sinv</strong> using the sinv.template generated above
on the nodegroup, <strong>testnodes</strong> ,possibly generating up to two
new templates, and removing all generated templates in the end, and writing
output report to /tmp/sinv.output, enter:</p>
<blockquote>
<div><div class="highlight-perl"><div class="highlight"><pre><span class="n">sinv</span> <span class="o">-</span><span class="n">c</span> <span class="s">&quot;xdsh testnodes rpm -qa | grep ssh&quot;</span> <span class="o">-</span><span class="n">p</span> <span class="sr">/tmp/si</span><span class="n">nv</span><span class="o">.</span><span class="n">template</span> <span class="o">-</span><span class="n">t</span> <span class="mi">2</span> <span class="o">-</span><span class="n">r</span> <span class="o">-</span><span class="n">o</span> <span class="sr">/tmp/si</span><span class="n">nv</span><span class="o">.</span><span class="n">output</span>
</pre></div>
</div>
<p>Note: do not add the pipe to xdshcoll on the -c flag, it is automatically added by the sinv routine.</p>
</div></blockquote>
<p>4. To execute <strong>sinv</strong> on noderange, node1-node4, using the seed node, node8,
to generate the first template, using the xdsh command (-c),
possibly generating up to two additional
templates and not removing any templates at the end, enter:</p>
<blockquote>
<div><div class="highlight-perl"><div class="highlight"><pre><span class="n">sinv</span> <span class="o">-</span><span class="n">c</span> <span class="s">&quot;xdsh node1-node4 lslpp -l | grep bos.adt&quot;</span> <span class="o">-</span><span class="n">s</span> <span class="n">node8</span> <span class="o">-</span><span class="n">p</span> <span class="sr">/tmp/si</span><span class="n">nv</span><span class="o">.</span><span class="n">template</span> <span class="o">-</span><span class="n">t</span> <span class="mi">2</span> <span class="o">-</span><span class="n">o</span> <span class="sr">/tmp/si</span><span class="n">nv</span><span class="o">.</span><span class="n">output</span>
</pre></div>
</div>
</div></blockquote>
<p>5. To execute <strong>sinv</strong> on noderange, node1-node4, using the seed node, node8,
to generate the first template, using the rinv command (-c),
possibly generating up to two additional
templates and removing any generated templates at the end, enter:</p>
<blockquote>
<div><div class="highlight-perl"><div class="highlight"><pre><span class="n">sinv</span> <span class="o">-</span><span class="n">c</span> <span class="s">&quot;rinv node1-node4 serial&quot;</span> <span class="o">-</span><span class="n">s</span> <span class="n">node8</span> <span class="o">-</span><span class="n">p</span> <span class="sr">/tmp/si</span><span class="n">nv</span><span class="o">.</span><span class="n">template</span> <span class="o">-</span><span class="n">t</span> <span class="mi">2</span> <span class="o">-</span><span class="n">r</span> <span class="o">-</span><span class="n">o</span> <span class="sr">/tmp/</span><span class="n">rinv</span><span class="o">.</span><span class="n">output</span>
</pre></div>
</div>
</div></blockquote>
<p>6. To execute <strong>sinv</strong> on noderange, node1-node4, using node1 as
the seed node, to generate the sinv.template from the xdsh command (-c),
using the exact match option, generating no additional templates, enter:</p>
<blockquote>
<div><div class="highlight-perl"><div class="highlight"><pre><span class="n">sinv</span> <span class="o">-</span><span class="n">c</span> <span class="s">&quot;xdsh node1-node4 lslpp -l | grep bos.adt&quot;</span> <span class="o">-</span><span class="n">s</span> <span class="n">node1</span> <span class="o">-</span><span class="n">e</span> <span class="o">-</span><span class="n">p</span> <span class="sr">/tmp/si</span><span class="n">nv</span><span class="o">.</span><span class="n">template</span>  <span class="o">-</span><span class="n">o</span> <span class="sr">/tmp/si</span><span class="n">nv</span><span class="o">.</span><span class="n">output</span>
</pre></div>
</div>
<p>Note: the /tmp/sinv.template file must be empty, otherwise it will be used
as an admin generated template.</p>
</div></blockquote>
<ol class="arabic simple" start="7">
<li>To execute <strong>sinv</strong> on the Linux osimage defined for cn1.  First build a template from the /etc/hosts on the node. Then run sinv to compare.</li>
</ol>
<blockquote>
<div><div class="highlight-perl"><div class="highlight"><pre>xdsh cn1 &quot;cat /etc/hosts&quot; | xdshcoll &gt; /tmp/sinv2/template&quot;

sinv -c &quot;xdsh -i /install/netboot/rhels6/ppc64/test_ramdisk_statelite/rootimg cat /etc/hosts&quot; -e -t1 -p /tmp/sinv.template -o /tmp/sinv.output
</pre></div>
</div>
</div></blockquote>
<ol class="arabic" start="8">
<li><p class="first">To execute <strong>sinv</strong> on the AIX NIM 611dskls spot and compare /etc/hosts to compute1 node, run the following:</p>
<div class="highlight-perl"><div class="highlight"><pre>xdsh compute1 &quot;cat /etc/hosts&quot; | xdshcoll &gt; /tmp/sinv2/template&quot;

sinv -c &quot;xdsh -i 611dskls cat /etc/hosts&quot; -e -t1 -p /tmp/sinv.template -o /tmp/sinv.output
</pre></div>
</div>
</li>
<li><p class="first">To execute <strong>sinv</strong> on the device mswitch2 and compare to mswitch1</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="n">sinv</span> <span class="o">-</span><span class="n">c</span> <span class="s">&quot;xdsh mswitch  enable;show version&quot;</span> <span class="o">-</span><span class="n">s</span> <span class="n">mswitch1</span> <span class="o">-</span><span class="n">p</span> <span class="sr">/tmp/si</span><span class="n">nv</span><span class="o">/</span><span class="n">template</span> <span class="o">--</span><span class="n">devicetype</span> <span class="nn">IBSwitch::</span><span class="n">Mellanox</span> <span class="o">-</span><span class="n">l</span> <span class="n">admin</span> <span class="o">-</span><span class="n">t</span> <span class="mi">2</span>
</pre></div>
</div>
</li>
</ol>
<p><strong>Files</strong></p>
<p><strong>/opt/xcat/bin/sinv/</strong></p>
<p>Location of the sinv command.</p>
</div>
<div class="section" id="see-also">
<h2><strong>SEE ALSO</strong><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<p>L &lt;xdsh(1)|xdsh.1&gt;, noderange(3)|noderange.3</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="snmove.1.html" class="btn btn-neutral float-right" title="snmove.1" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rvitals.1.html" class="btn btn-neutral" title="rvitals.1" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, IBM Corporation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'2.12',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>