

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>xcattest.1 &mdash; xCAT 2.12 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="xCAT 2.12 documentation" href="../../../../index.html"/>
        <link rel="up" title="man1" href="index.html"/>
        <link rel="next" title="xcoll.1" href="xcoll.1.html"/>
        <link rel="prev" title="xcatchroot.1" href="xcatchroot.1.html"/> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> xCAT
          

          
          </a>

          
            
            
              <div class="version">
                2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install-guides/index.html">Install Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Admin Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../basic_concepts/index.html">Basic Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../manage_clusters/index.html">Manage Clusters</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">References</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#xcat-man-pages">xCAT Man Pages</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="index.html">man1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man3/index.html">man3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man5/index.html">man5</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man7/index.html">man7</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man8/index.html">man8</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#xcat-tools">xCAT Tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../advanced/index.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developers/index.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../help.html">Need Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../security/index.html">Security Notices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../index.html">xCAT</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Admin Guide</a> &raquo;</li>
      
          <li><a href="../index.html">References</a> &raquo;</li>
      
          <li><a href="index.html">man1</a> &raquo;</li>
      
    <li>xcattest.1</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/guides/admin-guides/references/man1/xcattest.1.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="xcattest-1">
<h1>xcattest.1<a class="headerlink" href="#xcattest-1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="name">
<h2>NAME<a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h2>
<p><strong>xcattest</strong> - Run automated xCAT test cases.</p>
</div>
<div class="section" id="synopsis">
<h2>SYNOPSIS<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p><strong>xcattest</strong> [<strong>-?|-h</strong>]</p>
<p><strong>xcattest</strong> [<strong>-f</strong> <em>configure file</em>] [<strong>-b</strong> <em>case bundle list</em>]</p>
<p><strong>xcattest</strong> [<strong>-f</strong> <em>configure file</em>] [<strong>-t</strong> <em>case list</em>]</p>
<p><strong>xcattest</strong> [<strong>-f</strong> <em>configure file</em>] [<strong>-c</strong> <em>cmd list</em>]</p>
<p><strong>xcattest</strong> [<strong>-b</strong> <em>case bundle list</em>] [<strong>-l</strong>]</p>
<p><strong>xcattest</strong> [<strong>-t</strong> <em>case list</em>] [<strong>-l</strong>]</p>
<p><strong>xcattest</strong> [<strong>-c</strong> <em>cmd list</em>] [<strong>-l</strong>]</p>
<p><strong>xcattest</strong> [<strong>-s</strong> <strong>command</strong>]</p>
<p><strong>xcattest</strong> [<strong>-s</strong> <strong>bundle</strong>]</p>
</div>
<div class="section" id="description">
<h2>DESCRIPTION<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The xcattest command runs test cases to verify the xCAT functions, it can be used when you want to verify the xCAT functions for whatever reason, for example, to ensure the code changes you made do not break the existing commands; to run acceptance test for new build you got; to verify the xCAT snapshot build or development build before putting it onto your production system. The xcattest command is part of the xCAT package xCAT-test.</p>
<p>The root directory for the xCAT-test package is /opt/xcat/share/xcat/tools/autotest/. All test cases are in the sub directory <em>testcase</em>, indexed by the xCAT command, you can add your own test cases according to the test cases format below. The subdirectory <em>bundle</em> contains all the test cases bundles definition files, you can customize or create any test cases bundle file as required. The testing result information will be written into the subdirectory <em>result</em>, the timestamps are used as the postfixes for all the result files. xCAT-test package ships two configuration files template <em>aix.conf.template</em> and <em>linux.conf.template</em> for AIX and Linux environment, you can use the template files as the start point of making your own configuration file.</p>
</div>
<div class="section" id="options">
<h2>OPTIONS<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<p><strong>-?|-h</strong></p>
<blockquote>
<div>Display usage message.</div></blockquote>
<p><strong>-f</strong> <em>configure file</em></p>
<blockquote>
<div>Specifies the configuration file with full-path. xCAT supports an example config file: /opt/xcat/share/xcat/tools/autotest/linux.conf.template</div></blockquote>
<p><strong>-b</strong> <em>case bundle list</em></p>
<blockquote>
<div>Comma separated list of test cases bundle files, each test cases bundle can contain multiple lines and each line for one test case name. The bundle files should be listed in: /opt/xcat/share/xcat/tools/autotest/bundle.</div></blockquote>
<p><strong>-t</strong> <em>cases list</em></p>
<blockquote>
<div>Comma separated list of test cases that will be run.</div></blockquote>
<p><strong>-c</strong> <em>cmd list</em></p>
<blockquote>
<div>Comma separated list of commands which will be tested, i.e., all the test cases under the command sub directory will be run.</div></blockquote>
<p><strong>-l</strong></p>
<blockquote>
<div>Display the test cases names specified by the flag -b, -t or -c.</div></blockquote>
<p><strong>-s</strong></p>
<blockquote>
<div>Display the bundle files and command with value: bundle or command.</div></blockquote>
</div>
<div class="section" id="return-value">
<h2>RETURN VALUE<a class="headerlink" href="#return-value" title="Permalink to this headline">¶</a></h2>
<p>0 The command completed successfully.</p>
<p>1 An error has occurred.</p>
</div>
<div class="section" id="test-case-format">
<h2>TEST CASE FORMAT<a class="headerlink" href="#test-case-format" title="Permalink to this headline">¶</a></h2>
<p>The xCAT-test test cases are in flat text format, the testing framework will parse the test cases line by line, here is an example of the test case:</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="c1">#required, case name</span>
<span class="n">start:case</span> <span class="n">name</span>
<span class="c1">#optional, description of the test case</span>
<span class="n">description:</span> <span class="n">what</span> <span class="n">the</span> <span class="n">test</span> <span class="k">case</span> <span class="n">is</span> <span class="k">for</span><span class="p">?</span>
<span class="c1">#optional, environment requirements</span>
<span class="n">os:AIX</span><span class="o">/</span><span class="n">Linux</span>
<span class="c1">#optional, environment requirements</span>
<span class="n">arch:ppc</span><span class="o">/</span><span class="n">x86</span>
<span class="c1">#optional, environment requirements</span>
<span class="n">hcp:hmc</span><span class="sr">/mm/</span><span class="n">bmc</span><span class="o">/</span><span class="n">fsp</span>
<span class="c1">#required, command need to run</span>
<span class="n">cmd:comand</span>
<span class="c1">#optional, check return code of last executed command</span>
<span class="n">check:rc</span> <span class="o">==</span> <span class="ow">or</span> <span class="o">!=</span> <span class="k">return</span> <span class="n">code</span>
<span class="c1">#optional, check output of last executed command</span>
<span class="n">check:output</span><span class="o">==</span> <span class="ow">or</span> <span class="o">!=</span> <span class="ow">or</span> <span class="o">=~</span> <span class="ow">or</span> <span class="o">!~</span> <span class="n">output</span> <span class="n">check</span> <span class="n">string</span>
<span class="n">end</span>
</pre></div>
</div>
<p><strong>Note</strong>: Each test case can have more than one <em>cmd</em> sections and each <em>cmd</em> section can have more than one <em>check:rc</em> sections and more than one <em>check:output</em> sections, the <em>output check string</em> can include regular expressions.</p>
</div>
<div class="section" id="examples">
<h2>EXAMPLES<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">To run all  test cases related command rpower:</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="n">xcattest</span> <span class="o">-</span><span class="n">f</span> <span class="sr">/tmp/co</span><span class="n">nfig</span> <span class="o">-</span><span class="n">c</span> <span class="n">rpower</span>
</pre></div>
</div>
</li>
<li><p class="first">To run customized bundle with /tmp/config file:</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="n">xcattest</span> <span class="o">-</span><span class="n">c</span> <span class="n">lsdef</span> <span class="o">-</span><span class="n">l</span>  <span class="o">&gt;</span> <span class="sr">/opt/xc</span><span class="n">at</span><span class="sr">/share/xc</span><span class="n">at</span><span class="sr">/tools/</span><span class="n">autotest</span><span class="sr">/bundle/c</span><span class="n">ustom</span><span class="o">.</span><span class="n">bundle</span>
<span class="n">Modify</span> <span class="n">custom</span><span class="o">.</span><span class="n">bundle</span>
<span class="n">xcattest</span> <span class="o">-</span><span class="n">f</span> <span class="sr">/tmp/co</span><span class="n">nfig</span> <span class="o">-</span><span class="n">b</span> <span class="n">custom</span><span class="o">.</span><span class="n">bundle</span>
</pre></div>
</div>
</li>
<li><p class="first">To run specified test cases with /tmp/config file:</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="n">xcattest</span> <span class="o">-</span><span class="n">f</span> <span class="sr">/tmp/co</span><span class="n">nfig</span> <span class="o">-</span><span class="n">t</span> <span class="n">lsdef_t_o_l_z</span>
</pre></div>
</div>
</li>
<li><p class="first">To add a new case to test chvm. In the example, we assume that the min_mem should not be equal to 16 in the lpar profile of computenode. The case name is chvm_custom. It create a test lpar named testnode firstly, that change the min_mem of the lpar to 16 using chvm, then check if min_mem have changed correctly. At last, the testnode be remove to ensure no garbage produced in the cases.</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="n">add</span> <span class="n">a</span> <span class="k">new</span> <span class="n">test</span> <span class="k">case</span> <span class="n">file</span> <span class="n">in</span> <span class="sr">/opt/xc</span><span class="n">at</span><span class="sr">/share/xc</span><span class="n">at</span><span class="sr">/tools/</span><span class="n">autotest</span><span class="o">/</span><span class="n">chvm</span>
<span class="n">edit</span> <span class="n">filename</span>
<span class="n">start:chvm_custom</span>
<span class="n">hcp:hmc</span>
<span class="n">cmd:lsvm</span> <span class="nv">$$CN</span> <span class="o">&gt;</span> <span class="sr">/tmp/</span><span class="n">autotest</span><span class="o">.</span><span class="n">profile</span>
<span class="n">check:rc</span><span class="o">==</span><span class="mi">0</span>
<span class="n">cmd:mkdef</span> <span class="o">-</span><span class="n">t</span> <span class="n">node</span> <span class="o">-</span><span class="n">o</span> <span class="n">testnode</span> <span class="n">mgt</span><span class="o">=</span><span class="n">hmc</span> <span class="n">groups</span><span class="o">=</span><span class="n">all</span>
<span class="n">cmd:mkvm</span> <span class="n">testnode</span> <span class="o">-</span><span class="n">i</span> <span class="nv">$$MaxLparID</span> <span class="o">-</span><span class="n">l</span> <span class="nv">$$CN</span>
<span class="n">check:rc</span><span class="o">==</span><span class="mi">0</span>
<span class="n">cmd:perl</span> <span class="o">-</span><span class="n">pi</span> <span class="o">-</span><span class="n">e</span> <span class="s">&#39;s/min_mem=\d+/min_mem=16/g&#39;</span> <span class="sr">/tmp/</span><span class="n">autotest</span><span class="o">.</span><span class="n">profile</span>
<span class="n">cmd:cat</span> <span class="sr">/tmp/</span><span class="n">autotest</span><span class="o">.</span><span class="n">profile</span><span class="o">|</span><span class="n">chvm</span> <span class="n">testnode</span>
<span class="n">check:rc</span><span class="o">==</span><span class="mi">0</span>
<span class="n">cmd:lsvm</span> <span class="n">testnode</span>
<span class="n">check:output</span><span class="o">=~</span><span class="n">min_mem</span><span class="o">=</span><span class="mi">16</span>
<span class="n">cmd:rmvm</span> <span class="n">testnode</span>
<span class="n">cmd:rm</span> <span class="o">-</span><span class="n">f</span> <span class="sr">/tmp/</span><span class="n">autotest</span><span class="o">.</span><span class="n">profile</span>
<span class="n">end</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="inline-functions">
<h2>INLINE FUNCTIONS<a class="headerlink" href="#inline-functions" title="Permalink to this headline">¶</a></h2>
<p>The xCAT-test testing framework provides some inline functions. The inline functions can be called in test cases as __FUNCTIONNAME(PARAMTERLIST)__ to get some necessary attributes defined in the configuration file. The inline functions can be used in <em>cmd</em> section and the <em>check:output</em> section.</p>
<ol class="arabic simple">
<li><strong>GETNODEATTR(nodename, attribute)</strong> To get the value of specified node&#8217;s attribute</li>
<li><strong>INC(digit)</strong> To get value of digit+1.</li>
</ol>
<p>For example, to run rscan command against the hardware control point of compute node specified in the configuration file:</p>
<div class="highlight-perl"><div class="highlight"><pre>  <span class="n">rscan</span> <span class="n">__GETNODEATTR</span><span class="p">(</span><span class="nv">$$CN</span><span class="p">,</span> <span class="n">hcp</span><span class="p">)</span><span class="n">__</span> <span class="o">-</span><span class="n">z</span>
<span class="mi">3</span><span class="o">.</span> <span class="n">B</span><span class="o">&lt;</span><span class="n">GETTABLEVALUE</span><span class="p">(</span><span class="n">keyname</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">colname</span><span class="p">,</span> <span class="n">table</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">To</span> <span class="n">get</span> <span class="n">the</span> <span class="n">value</span> <span class="n">of</span> <span class="n">column</span> <span class="n">where</span> <span class="n">keyname</span> <span class="o">==</span> <span class="n">key</span> <span class="n">in</span> <span class="n">specified</span> <span class="n">table</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="files">
<h2>FILES<a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h2>
<p>/opt/xcat/bin/xcattest</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="xcoll.1.html" class="btn btn-neutral float-right" title="xcoll.1" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="xcatchroot.1.html" class="btn btn-neutral" title="xcatchroot.1" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, IBM Corporation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'2.12',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>