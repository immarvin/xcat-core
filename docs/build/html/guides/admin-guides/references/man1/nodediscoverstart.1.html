

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>nodediscoverstart.1 &mdash; xCAT 2.12 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="xCAT 2.12 documentation" href="../../../../index.html"/>
        <link rel="up" title="man1" href="index.html"/>
        <link rel="next" title="nodediscoverstatus.1" href="nodediscoverstatus.1.html"/>
        <link rel="prev" title="nodediscoverls.1" href="nodediscoverls.1.html"/> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> xCAT
          

          
          </a>

          
            
            
              <div class="version">
                2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install-guides/index.html">Install Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Admin Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../basic_concepts/index.html">Basic Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../manage_clusters/index.html">Manage Clusters</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">References</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#xcat-man-pages">xCAT Man Pages</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="index.html">man1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man3/index.html">man3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man5/index.html">man5</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man7/index.html">man7</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man8/index.html">man8</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#xcat-tools">xCAT Tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../advanced/index.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developers/index.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../help.html">Need Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../security/index.html">Security Notices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../index.html">xCAT</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Admin Guide</a> &raquo;</li>
      
          <li><a href="../index.html">References</a> &raquo;</li>
      
          <li><a href="index.html">man1</a> &raquo;</li>
      
    <li>nodediscoverstart.1</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/guides/admin-guides/references/man1/nodediscoverstart.1.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="nodediscoverstart-1">
<h1>nodediscoverstart.1<a class="headerlink" href="#nodediscoverstart-1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="name">
<h2>NAME<a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h2>
<p><strong>nodediscoverstart</strong> - starts the node discovery process</p>
</div>
<div class="section" id="synopsis">
<h2>SYNOPSIS<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p><strong>nodediscoverstart</strong> [<strong>-h | -</strong><strong>-help | -v | -</strong><strong>-version</strong>]</p>
<p><strong>Sequential Discovery Specific:</strong></p>
<p><strong>nodediscoverstart</strong> <strong>noderange=</strong><em>noderange</em> [<strong>hostiprange=</strong><em>imageprofile</em>] [<strong>bmciprange=</strong><em>bmciprange</em>] [<strong>groups=</strong><em>groups</em>] [<strong>rack=</strong><em>rack</em>] [<strong>chassis=</strong><em>chassis</em>] [<strong>height=</strong><em>height</em>] [<strong>unit=</strong><em>unit</em>] [<strong>osimage=</strong> <em>osimagename</em>&gt;] [<strong>-n | -</strong><strong>-dns</strong>] [<strong>-s | -</strong><strong>-skipbmcsetup</strong>] [<strong>-V|-</strong><strong>-verbose</strong>]</p>
<p><strong>Profile Discovery Specific:</strong></p>
<p><strong>nodediscoverstart</strong> <strong>networkprofile=</strong><em>network-profile</em> <strong>imageprofile=</strong><em>image-profile</em> <strong>hostnameformat=</strong><em>nost-name-format</em> [<strong>hardwareprofile=</strong><em>hardware-profile</em>] [<strong>groups=</strong><em>node-groups</em>] [<strong>rack=</strong><em>rack-name</em>] [<strong>chassis=</strong><em>chassis-name</em>] [<strong>height=</strong><em>rack-server-height</em>] [<strong>unit=</strong><em>rack-server-unit-location</em>] [<strong>rank=</strong><em>rank-num</em>]</p>
</div>
<div class="section" id="description">
<h2>DESCRIPTION<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The <strong>nodediscoverstart</strong> command starts either the <strong>Sequential Discovery</strong> or <strong>Profile Discovery</strong> process.  They can not both be
running at the same time.</p>
<p><strong>Sequential Discovery Specific:</strong></p>
<p>This is the simplest discovery approach.  You only need to specify the <strong>noderange</strong>, <strong>hostiprange</strong> and <strong>bmciprange</strong> that should be
given to nodes that are discovered.  (If you pre-define the nodes (via nodeadd or mkdef) and specify their host and BMC IP addresses,
then you only need to specify the <strong>noderange</strong> to the <strong>nodediscoverstart</strong> command.)  Once you have run <strong>nodediscoverstart</strong>, then
physically power on the nodes in the sequence that you want them to receive the node names and IPs, waiting a short time (e.g. 30 seconds)
between each node.</p>
<p><strong>Profile Discovery Specific:</strong></p>
<p>This is the PCM discovery approach.  <em>networkprofile</em>, <em>imageprofile</em>, <em>hostnameformat</em> arguments must be specified to start the <strong>Profile Discovery</strong>.
All nodes discovered by this process will be associated with specified profiles and rack/chassis/unit locations.</p>
<p>When the nodes are discovered, PCM updates the affected configuration files on the management node automatically. Configuration files include the /etc/hosts service file, DNS configuration, and DHCP configuration. Kit plug-ins are automatically triggered to update kit related configurations and services.</p>
<p>When you power on the nodes, they PXE boot and DHCP/TFTP/HTTP on the management node give each node the xCAT genesis boot image,
which inventories the node hardware and sends data to the management node.  There, either the sequential discovery process or the
profile discovery process assigns node attributes and defines the node in the the database.</p>
</div>
<div class="section" id="options">
<h2>OPTIONS<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<p><strong>noderange=</strong><em>noderange</em></p>
<blockquote>
<div>The set of node names that should be given to nodes that are discovered via the <strong>Sequential Discovery</strong> method.
This argument is required to <strong>Sequential Discovery</strong>. Any valid xCAT <strong>noderange</strong> is allowed, e.g. node[01-10].</div></blockquote>
<p><strong>hostiprange=</strong><em>ip range</em></p>
<blockquote>
<div>The ip range which will be assigned to the host of new discovered nodes in the <strong>Sequential Discovery</strong> method. The format can be: <em>start_ip</em><strong>-</strong><em>end_ip</em> or <em>noderange</em>, e.g. 192.168.0.1-192.168.0.10 or 192.168.0.[1-10].</div></blockquote>
<p><strong>bmciprange=</strong><em>ip range</em></p>
<blockquote>
<div>The ip range which will be assigned to the bmc of new discovered nodes in the <strong>Sequential Discovery</strong> method. The format can be: <em>start_ip</em><strong>-</strong><em>end_ip</em> or <em>noderange</em>, e.g. 192.168.1.1-192.168.1.10 or 192.168.1.[1-10].</div></blockquote>
<p><strong>imageprofile=</strong><em>image-profile</em></p>
<blockquote>
<div>Sets the new image profile name used by the discovered nodes in the <strong>Profile Discovery</strong> method.  An image profile defines the provisioning method, OS information, kit information, and provisioning parameters for a node. If the &#8220;__ImageProfile_imgprofile&#8221; group already exists in the nodehm table, then &#8220;imgprofile&#8221; is used as the image profile name.</div></blockquote>
<p><strong>networkprofile=</strong><em>network-profile</em></p>
<blockquote>
<div>Sets the new network profile name used by the discovered nodes in the <strong>Profile Discovery</strong> method. A network profile defines the network, NIC, and routes for a node. If the &#8220;__NetworkProfile_netprofile&#8221; group already exists in the nodehm table, then &#8220;netprofile&#8221; is used as the network profile name.</div></blockquote>
<p><strong>hardwareprofile=</strong><em>hardware-profile</em></p>
<blockquote>
<div>Sets the new hardware profile name used by the discovered nodes in the <strong>Profile Discovery</strong> method. If a &#8220;__HardwareProfile_hwprofile&#8221; group exists, then &#8220;hwprofile&#8221; is the hardware profile name. A hardware profile defines hardware management related information for imported nodes, including: IPMI, HMC, CEC, CMM.</div></blockquote>
<p><strong>hostnameformat=</strong><em>nost-name-format</em></p>
<blockquote>
<div><p>Sets the node name format for all discovered nodes in the <strong>Profile Discovery</strong> method. The two types of formats supported are prefix#NNNappendix and prefix#RRand#NNappendix, where wildcard #NNN and #NN are replaced by a system generated number that is based on the provisioning order. Wildcard #RR represents the rack number and stays constant.</p>
<p>For example, if the node name format is compute-#NN, the node name is generated as: compute-00, compute-01, ..., compute-99. If the node name format is blade#NNN-x64, the node name is generated as: blade001-x64, blade002-x64, ..., blade999-x64</p>
<p>For example, if the node name format is compute-#RR-#NN and the rack number is 2, the node name is generated as: compute-02-00, compute-02-01, ..., compute-02-99. If node name format is node-#NN-in-#RR and rack number is 1, the node name is generated as: node-00-in-01, node-01-in-01, ..., node-99-in-01</p>
</div></blockquote>
<p><strong>groups=</strong><em>node-groups</em></p>
<blockquote>
<div>Sets the node groups that the discovered nodes should be put in for either the Sequential Discovery or Profile Discovery methods, where <em>node-group</em> is a comma-separated list of node groups.</div></blockquote>
<p><strong>rack=</strong><em>rack-name</em>&gt;</p>
<blockquote>
<div>Sets the rack name where the node is located for either the Sequential Discovery or Profile Discovery methods.</div></blockquote>
<p><strong>chasiss=</strong><em>chassis-name</em></p>
<blockquote>
<div>Sets the chassis name that the Blade server or PureFlex blade is located in, for either the Sequential Discovery or Profile Discovery methods. This option is used for the Blade server and PureFlex system only. You cannot specify this option with the rack option.</div></blockquote>
<p><strong>height=</strong><em>rack-server-height</em></p>
<blockquote>
<div>Sets the height of a rack-mounted server in U units for either the Sequential Discovery or Profile Discovery methods. If the rack option is not specified, the default value is 1.</div></blockquote>
<p><strong>unit=</strong><em>rack-server-unit-location</em></p>
<blockquote>
<div>Sets the start unit value for the node in the rack, for either the Sequential Discovery or Profile Discovery methods. This option is for a rack server only. If the unit option is not specified, the default value is 1</div></blockquote>
<p><strong>rank=</strong><em>rank-num</em></p>
<blockquote>
<div>Specifies the starting rank number that is used in the node name format, for the Profile Discovery method.  The rank number must be a valid integer between 0 and 254. This option must be specified with nodenameformat option. For example, if your node name format is compute-#RR-#NN. The rack&#8217;s number is 2 and rank is specified as 5, the node name is generated as follows: compute-02-05, compute-02-06, ..., compute-02-99.</div></blockquote>
<p><strong>osimage=</strong><em>osimagename</em></p>
<blockquote>
<div>Specifies the osimage name that will be associated with the new discovered node, the os provisioning will be started automatically at the end of the discovery process.</div></blockquote>
<p><strong>-n|-</strong><strong>-dns</strong></p>
<blockquote>
<div>Specifies to run makedns &lt;nodename&gt; for any new discovered node. This is useful mainly for non-predefined configuration, before running the &#8220;nodediscoverstart -n&#8221;, the user needs to run makedns -n to initialize the named setup on the management node.</div></blockquote>
<p><strong>-s|-</strong><strong>-skipbmcsetup</strong></p>
<blockquote>
<div>Specifies to skip the bmcsetup during the sequential discovery process, if the bmciprange is specified with nodediscoverstart command, the BMC will be setup automatically during the discovery process, if the user does not want to run bmcsetup, could specify the &#8220;-s|&#8211;skipbmcsetup&#8221; with nodediscoverstart command to skip the bmcsetup.</div></blockquote>
<p><strong>-V|-</strong><strong>-verbose</strong></p>
<blockquote>
<div>Enumerates the free node names and host/bmc ips that are being specified in the ranges given.  Use this option
with Sequential Discovery to ensure that you are specifying the ranges you intend.</div></blockquote>
<p><strong>-h|-</strong><strong>-help</strong></p>
<blockquote>
<div>Display usage message.</div></blockquote>
<p><strong>-v|-</strong><strong>-version</strong></p>
<blockquote>
<div>Command Version.</div></blockquote>
</div>
<div class="section" id="return-value">
<h2>RETURN VALUE<a class="headerlink" href="#return-value" title="Permalink to this headline">¶</a></h2>
<p>0  The command completed successfully.</p>
<p>1  An error has occured.</p>
</div>
<div class="section" id="examples">
<h2>EXAMPLES<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><strong>Sequential Discovery</strong>: To discover nodes with noderange and host/bmc ip range:</li>
</ol>
<blockquote>
<div><div class="highlight-perl"><div class="highlight"><pre><span class="n">nodediscoverstart</span> <span class="n">noderange</span><span class="o">=</span><span class="n">n</span><span class="p">[</span><span class="mi">1</span><span class="o">-</span><span class="mi">10</span><span class="p">]</span> <span class="n">hostiprange</span><span class="o">=</span><span class="s">&#39;172.20.101.1-172.20.101.10&#39;</span> <span class="n">bmciprange</span><span class="o">=</span><span class="s">&#39;172.20.102.1-172.20.102.10&#39;</span> <span class="o">-</span><span class="n">V</span>
</pre></div>
</div>
<p>Output is similar to:</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="n">Sequential</span> <span class="n">Discovery:</span> <span class="n">Started:</span>
   <span class="n">Number</span> <span class="n">of</span> <span class="n">free</span> <span class="n">node</span> <span class="n">names:</span> <span class="mi">10</span>
   <span class="n">Number</span> <span class="n">of</span> <span class="n">free</span> <span class="n">host</span> <span class="n">ips:</span> <span class="mi">10</span>
   <span class="n">Number</span> <span class="n">of</span> <span class="n">free</span> <span class="n">bmc</span> <span class="n">ips:</span> <span class="mi">10</span>
<span class="o">------------------------------------</span><span class="n">Free</span> <span class="n">Nodes</span><span class="o">------------------------------------</span>
<span class="n">NODE</span>                <span class="n">HOST</span> <span class="n">IP</span>             <span class="n">BMC</span> <span class="n">IP</span>
<span class="n">n01</span>                 <span class="mf">172.20.101.1</span>        <span class="mf">172.20.102.1</span>
<span class="n">n02</span>                 <span class="mf">172.20.101.2</span>        <span class="mf">172.20.102.2</span>
<span class="o">...</span>                 <span class="o">...</span>                 <span class="o">...</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><strong>Profile Discovery</strong>: To discover nodes using the default_cn network profile and the rhels6.3_packaged image profile, use the following command:</li>
</ol>
<blockquote>
<div><div class="highlight-perl"><div class="highlight"><pre><span class="n">nodediscoverstart</span> <span class="n">networkprofile</span><span class="o">=</span><span class="n">default_cn</span> <span class="n">imageprofile</span><span class="o">=</span><span class="n">rhels6</span><span class="mf">.3_</span><span class="n">packaged</span> <span class="n">hostnameformat</span><span class="o">=</span><span class="n">compute</span><span class="c1">#NNN</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="see-also">
<h2>SEE ALSO<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<p>nodediscoverstop(1)|nodediscoverstop.1, nodediscoverls(1)|nodediscoverls.1, nodediscoverstatus(1)|nodediscoverstatus.1</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="nodediscoverstatus.1.html" class="btn btn-neutral float-right" title="nodediscoverstatus.1" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="nodediscoverls.1.html" class="btn btn-neutral" title="nodediscoverls.1" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, IBM Corporation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'2.12',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>