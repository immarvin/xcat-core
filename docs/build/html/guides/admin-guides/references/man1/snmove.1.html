

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>snmove.1 &mdash; xCAT 2.12 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="xCAT 2.12 documentation" href="../../../../index.html"/>
        <link rel="up" title="man1" href="index.html"/>
        <link rel="next" title="swapnodes.1" href="swapnodes.1.html"/>
        <link rel="prev" title="sinv.1" href="sinv.1.html"/> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> xCAT
          

          
          </a>

          
            
            
              <div class="version">
                2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install-guides/index.html">Install Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Admin Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../basic_concepts/index.html">Basic Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../manage_clusters/index.html">Manage Clusters</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">References</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#xcat-man-pages">xCAT Man Pages</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="index.html">man1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man3/index.html">man3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man5/index.html">man5</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man7/index.html">man7</a></li>
<li class="toctree-l4"><a class="reference internal" href="../man8/index.html">man8</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#xcat-tools">xCAT Tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../advanced/index.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developers/index.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../help.html">Need Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../security/index.html">Security Notices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../index.html">xCAT</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Admin Guide</a> &raquo;</li>
      
          <li><a href="../index.html">References</a> &raquo;</li>
      
          <li><a href="index.html">man1</a> &raquo;</li>
      
    <li>snmove.1</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/guides/admin-guides/references/man1/snmove.1.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="snmove-1">
<h1>snmove.1<a class="headerlink" href="#snmove-1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="name">
<h2>NAME<a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h2>
<p><strong>snmove</strong> - Move xCAT compute nodes to a different xCAT service node.</p>
</div>
<div class="section" id="synopsis">
<h2>SYNOPSIS<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p><strong>snmove</strong> <em>noderange</em> [<strong>-V</strong>] [<strong>-l | -</strong><strong>-liteonly</strong>] [<strong>-d | -</strong><strong>-dest</strong> <em>sn2</em>] [<strong>-D | -</strong><strong>-destn</strong> <em>sn2n</em>] [<strong>-i | -</strong><strong>-ignorenodes</strong>] [<strong>-P | -</strong><strong>-postscripts</strong> <em>script1,script2...</em> | <strong>all</strong>]</p>
<p><strong>snmove</strong> [<strong>-V</strong>] [<strong>-l | -</strong><strong>-liteonly</strong>] <strong>-s | -</strong><strong>-source</strong> <em>sn1</em> [<strong>-S | -</strong><strong>-sourcen</strong> <em>sn1n</em>] [<strong>-d | -</strong><strong>-dest</strong> <em>sn2</em>] [<strong>-D | -</strong><strong>-destn</strong> <em>sn2n</em>] [<strong>-i | -</strong><strong>-ignorenodes</strong>] [<strong>-P | -</strong><strong>-postscripts</strong> <em>script1,script2...</em> | <strong>all</strong>]</p>
<p><strong>snmove</strong> [<strong>-h | -</strong><strong>-help | -v | -</strong><strong>-version</strong>]</p>
</div>
<div class="section" id="description">
<h2>DESCRIPTION<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The <strong>snmove</strong> command may be used to move a node or nodes from one service node to another backup service node.</p>
<p>The use of backup service nodes in an xCAT hierarchical cluster can
help improve the overall reliability, availability, and serviceability
of the cluster.</p>
<p>Before you run the <strong>snmove</strong> command it is assumed that the backup
service node has been configured properly to manage the new node
or nodes. (See the xCAT document named
&#8220;Using xCAT Service Nodes with AIX&#8221; for information on how to set
up backup AIX service nodes.).</p>
<p>The <strong>snmove</strong> command can use the information stored in the xCAT
database or information passed in on the command line to determine
the current service node and the backup service node.</p>
<p>To specify the primary and backup service nodes you can set the
&#8220;servicenode&#8221; attribute of the node definitions.</p>
<p>The <strong>servicenode</strong> attribute is the hostname of the xCAT service node
as it is known by the management node. The <strong>xcatmaster</strong> attribute
is the hostname of the xCAT service node as known by the node.
The <strong>servicenode</strong> attribute should be set to a comma-separated list
so that the primary service node is first and the backup service
node is second.  The <strong>xcatmaster</strong> attribute must be set to the
hostname of the primary service node as it is known by the node.</p>
<p>When the <strong>snmove</strong> command is run it modifies the xCAT database to
switch the the primary server to the backup server.</p>
<p>It will also check the other services that are being used for the
node (tftpserver, monserver, nfsserver, conserver), and if they were set
to the original service node they will be changed to point to the backup
service node.</p>
<p>By default the command will modify the nodes so that they will be able to be managed by the backup service node.</p>
<p>If the <strong>-i</strong> option is specified, the nodes themselves will not be modified.</p>
<p>You can also have postscripts executed on the nodes by using the -P option if needed.</p>
<p>The xCAT <strong>snmove</strong> command may also be used to synchronize statelite persistent files from the primary service node to the backup service node without actually moving the nodes to the backup servers.</p>
<p>If you run the command with the &#8220;-l&#8221; option it will attempt to use rsync to update the statelite persistent directory on the backup service node. This will only be done if the server specified in the &#8220;statelite&#8221; table is the primary service node.</p>
<p>When the <strong>snmove</strong> command is executed the new service node must be running but
the original service node may be down.</p>
<p>Note: On a Linux cluster, for NFS statelite nodes that do not use external NFS server, if the original service node is down, the nodes it manages will be down too. You must run nodeset command and then reboot the nodes after running snmove. For stateless nodes and RAMDisk statelite nodes, the nodes will be up even if the original service node is down. However, make sure to run nodeset command if you decide to reboot the nodes later.</p>
</div>
<div class="section" id="options">
<h2>OPTIONS<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<p><strong>-d|-</strong><strong>-dest</strong></p>
<blockquote>
<div>Specifies the hostname of the new destination service node as known by (facing) the management node.</div></blockquote>
<p><strong>-D|-</strong><strong>-destn</strong></p>
<blockquote>
<div>Specifies the hostname of the destination service node as known by (facing) the nodes.</div></blockquote>
<p><strong>-h|-</strong><strong>-help</strong></p>
<blockquote>
<div>Display usage message.</div></blockquote>
<p><strong>-i|-</strong><strong>-ignorenodes</strong></p>
<blockquote>
<div>No modifications will be made on the nodes. If not specified, several xCAT postscripts will be run on the nodes to complete the switch to the new service node.</div></blockquote>
<p><strong>-l|-</strong><strong>-liteonly</strong></p>
<blockquote>
<div>Use this option to ONLY synchronize any AIX statelite files from the primary server to the backup server for the nodes. It will not do the actual moving of thre nodes the the backup servers.</div></blockquote>
<p><strong>-P|-</strong><strong>-postscripts</strong></p>
<blockquote>
<div>Specifies a list of extra postscripts to be run on the nodes after the nodes are moved over to the new serive node. If <strong>all</strong> is specified, all the postscripts defined in the postscripts table will be run for the nodes. The specified postscripts must be stored under /install/postscripts directory.</div></blockquote>
<p><strong>-s|-</strong><strong>-source</strong></p>
<blockquote>
<div>Specifies the hostname of the current (source) service node sa known by (facing) the management node.</div></blockquote>
<p><strong>-S|-</strong><strong>-sourcen</strong></p>
<blockquote>
<div>Specifies the hostname of the current service node adapter as known by (facing)
the nodes.</div></blockquote>
<p><strong>-V|-</strong><strong>-verbose</strong></p>
<blockquote>
<div>Verbose mode.</div></blockquote>
<p><strong>-v|-</strong><strong>-version</strong></p>
<blockquote>
<div>Command Version.</div></blockquote>
</div>
<div class="section" id="examples">
<h2>EXAMPLES<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Move the nodes contained in group &#8220;group1&#8221; to the service node named &#8220;xcatsn02&#8221;.</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="n">snmove</span> <span class="n">group1</span> <span class="o">-</span><span class="n">d</span> <span class="n">xcatsn02</span> <span class="o">-</span><span class="n">D</span> <span class="n">xcatsn02</span><span class="o">-</span><span class="n">eth1</span>
</pre></div>
</div>
</li>
<li><p class="first">Move all the nodes that use service node xcatsn01 to service node xcatsn02.</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="n">snmove</span> <span class="o">-</span><span class="n">s</span> <span class="n">xcatsn01</span> <span class="o">-</span><span class="n">S</span> <span class="n">xcatsn01</span><span class="o">-</span><span class="n">eth1</span> <span class="o">-</span><span class="n">d</span> <span class="n">xcatsn02</span> <span class="o">-</span><span class="n">D</span> <span class="n">xcatsn02</span><span class="o">-</span><span class="n">eth1</span>
</pre></div>
</div>
</li>
<li><p class="first">Move any nodes that have sn1 as their primary server to the backup service node set in the xCAT node definition.</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="n">snmove</span> <span class="o">-</span><span class="n">s</span> <span class="n">sn1</span>
</pre></div>
</div>
</li>
<li><p class="first">Move all the nodes in the xCAT group named &#8220;nodegroup1&#8221; to their backup SNs.</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="n">snmove</span> <span class="n">nodegroup1</span>
</pre></div>
</div>
</li>
<li><p class="first">Move all the nodes in xCAT group &#8220;sngroup1&#8221; to the service node named &#8220;xcatsn2&#8221;.</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="n">snmove</span> <span class="n">sngroup1</span> <span class="o">-</span><span class="n">d</span> <span class="n">xcatsn2</span>
</pre></div>
</div>
</li>
<li><p class="first">Move all the nodes in xCAT group &#8220;sngroup1&#8221; to the SN named &#8220;xcatsn2&#8221; and run extra postscripts.</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="n">snmove</span> <span class="n">sngroup1</span> <span class="o">-</span><span class="n">d</span> <span class="n">xcatsn2</span> <span class="o">-</span><span class="n">P</span> <span class="n">test1</span>
</pre></div>
</div>
</li>
<li><p class="first">Move all the nodes in xCAT group &#8220;sngroup1&#8221; to the SN named &#8220;xcatsn2&#8221; and do not run anything on the nodes.</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="n">snmove</span> <span class="n">sngroup1</span> <span class="o">-</span><span class="n">d</span> <span class="n">xcatsn2</span> <span class="o">-</span><span class="n">i</span>
</pre></div>
</div>
</li>
<li><p class="first">Synchronize any AIX statelite files from the primary server for compute03 to the backup server.  This will not actually move the node to it&#8217;s backup service node.</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="n">snmove</span> <span class="n">compute03</span> <span class="o">-</span><span class="n">l</span> <span class="o">-</span><span class="n">V</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="files">
<h2>FILES<a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h2>
<p>/opt/xcat/sbin/snmove</p>
</div>
<div class="section" id="see-also">
<h2>SEE ALSO<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<p>noderange(3)|noderange.3</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="swapnodes.1.html" class="btn btn-neutral float-right" title="swapnodes.1" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sinv.1.html" class="btn btn-neutral" title="sinv.1" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, IBM Corporation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'2.12',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>