

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuration &mdash; xCAT 2.12 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="xCAT 2.12 documentation" href="../../../../../index.html"/>
        <link rel="up" title="Statelite Installation" href="index.html"/>
        <link rel="next" title="Provision statelite" href="provision_statelite.html"/>
        <link rel="prev" title="Statelite Installation" href="index.html"/> 

  
  <script src="../../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../../index.html" class="icon icon-home"> xCAT
          

          
          </a>

          
            
            
              <div class="version">
                2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../install-guides/index.html">Install Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Admin Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../basic_concepts/index.html">Basic Concepts</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">Manage Clusters</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">IBM Power LE / OpenPOWER</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../configure/index.html">Configure xCAT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../discovery/index.html">Hardware Discovery &amp; Define Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="../management.html">Hardware Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../diskful/index.html">Diskful Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../diskless/index.html">Diskless Installation</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">Statelite Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../updatenode.html">Using Updatenode</a></li>
<li class="toctree-l4"><a class="reference internal" href="../parallel_cmd.html">Parallel Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../virtual_machines/index.html">Virtual Machines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../x86_64/index.html">x86_64</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../references/index.html">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../advanced/index.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../developers/index.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../help.html">Need Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../security/index.html">Security Notices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../../index.html">xCAT</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../index.html">Admin Guide</a> &raquo;</li>
      
          <li><a href="../../index.html">Manage Clusters</a> &raquo;</li>
      
          <li><a href="../index.html">IBM Power LE / OpenPOWER</a> &raquo;</li>
      
          <li><a href="index.html">Statelite Installation</a> &raquo;</li>
      
    <li>Configuration</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../../_sources/guides/admin-guides/manage_clusters/ppc64le/statelite/config_statelite.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuration">
<h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<dl class="docutils">
<dt>Statelite configuration is done using the following tables in xCAT:</dt>
<dd><ul class="first last simple">
<li>litefile</li>
<li>litetree</li>
<li>statelite</li>
<li>policy</li>
<li>noderes</li>
</ul>
</dd>
</dl>
<div class="section" id="litefile-table">
<h2>litefile table<a class="headerlink" href="#litefile-table" title="Permalink to this headline">¶</a></h2>
<p>The litefile table specifies the directories and files on the statelite nodes that should be read/write, persistent, or read-only overlay. All other files in the statelite nodes come from the read-only statelite image.</p>
<ol class="arabic">
<li><p class="first">The first column in the litefile table is the image name this row applies to. It can be an exact osimage definition name, an osimage group (set in the groups attribute of osimages), or the keyword <code class="docutils literal"><span class="pre">ALL</span></code>.</p>
</li>
<li><p class="first">The second column in the litefile table is the full path of the directory or file on the node that you are setting options for.</p>
</li>
<li><p class="first">The third column in the litefile table specifies options for the directory or file:</p>
<blockquote>
<div><ol class="arabic simple">
<li>tmpfs - It provides a file or directory for the node to use when booting, its permission will be the same as the original version on the server. In most cases, it is read-write; however, on the next statelite boot, the original version of the file or directory on the server will be used, it means it is non-persistent. This option can be performed on files and directories.</li>
<li>rw - Same as Above.Its name &#8220;rw&#8221; does NOT mean it always be read-write, even in most cases it is read-write. Do not confuse it with the &#8220;rw&#8221; permission in the file system.</li>
<li>persistent - It provides a mounted file or directory that is copied to the xCAT persistent location and then over-mounted on the local file or directory. Anything written to that file or directory is preserved. It means, if the file/directory does not exist at first, it will be copied to the persistent location. Next time the file/directory in the persistent location will be used. The file/directory will be persistent across reboots. Its permission will be the same as the original one in the statelite location. It requires the statelite table to be filled out with a spot for persistent statelite. This option can be performed on files and directories.</li>
<li>con - The contents of the pathname are concatenated to the contents of the existing file. For this directive the searching in the litetree hierarchy does not stop when the first match is found. All files found in the hierarchy will be concatenated to the file when found. The permission of the file will be &#8220;-rw-r&#8211;r&#8211;&#8221;, which means it is read-write for the root user, but readonly for the others. It is non-persistent, when the node reboots, all changes to the file will be lost. It can only be performed on files. Do not use it for one directory.</li>
<li>ro - The file/directory will be overmounted read-only on the local file/directory. It will be located in the directory hierarchy specified in the litetree table. Changes made to this file or directory on the server will be immediately seen in this file/directory on the node. This option requires that the file/directory to be mounted must be available in one of the entries in the litetree table. This option can be performed on files and directories.</li>
<li>tmpfs,rw - Only for compatibility it is used as the default option if you leave the options column blank. It has the same semantics with the link option, so when adding new items into the _litefile table, the link option is recommended.</li>
<li>link - It provides one file/directory for the node to use when booting, it is copied from the server, and will be placed in tmpfs on the booted node. In the local file system of the booted node, it is one symbolic link to one file/directory in tmpfs. And the permission of the symbolic link is &#8220;lrwxrwxrwx&#8221;, which is not the real permission of the file/directory on the node. So for some application sensitive to file permissions, it will be one issue to use &#8220;link&#8221; as its option, for example, &#8220;/root/.ssh/&#8221;, which is used for SSH, should NOT use &#8220;link&#8221; as its option. It is non-persistent, when the node is rebooted, all changes to the file/directory will be lost. This option can be performed on files and directories.</li>
<li>link,ro - The file is readonly, and will be placed in tmpfs on the booted node. In the local file system of the booted node, it is one symbolic link to the tmpfs. It is non-persistent, when the node is rebooted, all changes to the file/directory will be lost. This option requires that the file/directory to be mounted must be available in one of the entries in the litetree table. The option can be performed on files and directories.</li>
<li>link,con - Similar to the &#8220;con&#8221; option. All the files found in the litetree hierarchy will be concatenated to the file when found. The final file will be put to the tmpfs on the booted node. In the local file system of the booted node, it is one symbolic link to the file/directory in tmpfs. It is non-persistent, when the node is rebooted, all changes to the file will be lost. The option can only be performed on files.</li>
<li>link,persistent - It provides a mounted file or directory that is copied to the xCAT persistent location and then over-mounted to the tmpfs on the booted node, and finally the symbolic link in the local file system will be linked to the over-mounted tmpfs file/directory on the booted node. The file/directory will be persistent across reboots. The permission of the file/directory where the symbolic link points to will be the same as the original one in the statelite location. It requires the statelite table to be filled out with a spot for persistent statelite. The option can be performed on files and directories.</li>
<li>localdisk - The file or directory will be stored in the local disk of the statelite node. Refer to the section To enable the localdisk option to enable the &#8216;localdisk&#8217; support.</li>
</ol>
</div></blockquote>
</li>
</ol>
<p>Currently, xCAT does not handle the relative links very well. The relative links are commonly used by the system libraries, for example, under <code class="docutils literal"><span class="pre">/lib/</span></code> directory, there will be one relative link matching one <code class="docutils literal"><span class="pre">.so</span></code> file. So, when you add one relative link to the litefile table (Not recommend), make sure the real file also be included, or put its directory name into the litefile table.</p>
<p><strong>Note</strong>: It is recommended that you specify at least the entries listed below in the litefile table, because most of these files need to be writeable for the node to boot up successfully. When any changes are made to their options, make sure they won&#8217;t affect the whole system.</p>
<div class="section" id="sample-data-for-redhat-statelite-setup">
<h3>Sample Data for Redhat statelite setup<a class="headerlink" href="#sample-data-for-redhat-statelite-setup" title="Permalink to this headline">¶</a></h3>
<p>This is the minimal list of files needed, you can add additional files to the litefile table.</p>
<div class="highlight-python"><div class="highlight"><pre>#image,file,options,comments,disable
&quot;ALL&quot;,&quot;/etc/adjtime&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/securetty&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/lvm/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/ntp.conf&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/rsyslog.conf&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/rsyslog.conf.XCATORIG&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/udev/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/ntp.conf.predhclient&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/resolv.conf&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/yp.conf&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/resolv.conf.predhclient&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/sysconfig/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/ssh/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/inittab&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/tmp/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/var/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/opt/xcat/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/xcatpost/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/systemd/system/multi-user.target.wants/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/root/.ssh/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/rc3.d/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/rc2.d/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/rc4.d/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/rc5.d/&quot;,&quot;tmpfs&quot;,,
</pre></div>
</div>
</div>
<div class="section" id="sample-data-for-sles-statelite-setup">
<h3>Sample Data for SLES statelite setup<a class="headerlink" href="#sample-data-for-sles-statelite-setup" title="Permalink to this headline">¶</a></h3>
<p>This is the minimal list of files needed, you can add additional files to the litefile table.</p>
<div class="highlight-python"><div class="highlight"><pre>#image,file,options,comments,disable
&quot;ALL&quot;,&quot;/etc/lvm/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/ntp.conf&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/ntp.conf.org&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/resolv.conf&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/ssh/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/sysconfig/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/syslog-ng/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/inittab&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/tmp/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/init.d/rc3.d/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/init.d/rc5.d/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/var/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/yp.conf&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/etc/fstab&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/opt/xcat/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/xcatpost/&quot;,&quot;tmpfs&quot;,,
&quot;ALL&quot;,&quot;/root/.ssh/&quot;,&quot;tmpfs&quot;,,
</pre></div>
</div>
</div>
</div>
<div class="section" id="litetree-table">
<h2>litetree table<a class="headerlink" href="#litetree-table" title="Permalink to this headline">¶</a></h2>
<p>The litetree table controls where the initial content of the files in the litefile table come from, and the long term content of the <code class="docutils literal"><span class="pre">ro</span></code> files. When a node boots up in statelite mode, it will by default copy all of its tmpfs files from the <code class="docutils literal"><span class="pre">.default</span></code> directory of the root image, for example <code class="docutils literal"><span class="pre">/install/netboot/rhels7.3/x86_64/compute/rootimg/.default</span></code>, so there is not required to set up a litetree table. If you decide that you want some of the files pulled from different locations that are different per node, you can use this table.</p>
<p>You can choose to use the defaults and not set up a litetree table.</p>
</div>
<div class="section" id="statelite-table">
<h2>statelite table<a class="headerlink" href="#statelite-table" title="Permalink to this headline">¶</a></h2>
<p>The statelite table specifies location on an NFS server where a nodes persistent files are stored. This is done by entering the information into the statelite table.</p>
<p>In the statelite table, the node or nodegroups in the table must be unique; that is a node or group should appear only once in the first column table. This makes sure that only one statelite image can be assigned to a node. An example would be:</p>
<div class="highlight-python"><div class="highlight"><pre>&quot;compute&quot;,,&quot;&lt;nfssvr_ip&gt;:/gpfs/state&quot;,,
</pre></div>
</div>
<p>Any nodes in the compute node group will have their state stored in the <code class="docutils literal"><span class="pre">/gpfs/state</span></code> directory on the machine with <code class="docutils literal"><span class="pre">&lt;nfssvr_ip&gt;</span></code> as its IP address.</p>
<p>When the node boots up, then the value of the <code class="docutils literal"><span class="pre">statemnt</span></code> attribute will be mounted to <code class="docutils literal"><span class="pre">/.statelite/persistent</span></code>. The code will then create the following subdirectory <code class="docutils literal"><span class="pre">/.statelite/persistent/&lt;nodename&gt;</span></code>, if there are persistent files that have been added in the litefile table. This directory will be the root of the image for this node&#8217;s persistent files. By default, xCAT will do a hard NFS mount of the directory. You can change the mount options by setting the mntopts attribute in the statelite table.</p>
<p>Also, to set the <code class="docutils literal"><span class="pre">statemnt</span></code> attribute, you can use variables from xCAT database. It follows the same grammar as the litetree table. For example:</p>
<div class="highlight-python"><div class="highlight"><pre>#node,image,statemnt,mntopts,comments,disable
&quot;cn1&quot;,,&quot;$noderes.nfsserver:/lite/state/$nodetype.profile&quot;,&quot;soft,timeo=30&quot;,,
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">Note</span></code>: Do not name your persistent storage directory with the node name, as the node name will be added in the directory automatically. If you do, then a directory named <code class="docutils literal"><span class="pre">/state/cn1</span></code> will have its state tree inside <code class="docutils literal"><span class="pre">/state/cn1/cn1</span></code>.</p>
</div>
<div class="section" id="policy">
<h2>Policy<a class="headerlink" href="#policy" title="Permalink to this headline">¶</a></h2>
<p>Ensure policies are set up correctly in the Policy Table. When a node boots up, it queries the xCAT database to get the litefile and litetree table information. In order for this to work, the commands (of the same name) must be set in the policy table to allow nodes to request it. This should happen automatically when xCAT is installed, but you may want to verify that the following lines are in the policy table:</p>
<div class="highlight-python"><div class="highlight"><pre>chdef -t policy -o 4.7 commands=litefile rule=allow
chdef -t policy -o 4.8 commands=litetree rule=allow
</pre></div>
</div>
</div>
<div class="section" id="noderes">
<h2>noderes<a class="headerlink" href="#noderes" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">noderes.nfsserver</span></code> attribute can be set for the NFSroot server. If this is not set, then the default is the Management Node.</p>
<p><code class="docutils literal"><span class="pre">noderes.nfsdir</span></code> can be set. If this is not set, the the default is <code class="docutils literal"><span class="pre">/install</span></code></p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="provision_statelite.html" class="btn btn-neutral float-right" title="Provision statelite" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Statelite Installation" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, IBM Corporation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../../',
            VERSION:'2.12',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>