

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PDU &mdash; xCAT 2.12 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="xCAT 2.12 documentation" href="../../index.html"/>
        <link rel="up" title="PDUs" href="index.html"/>
        <link rel="next" title="Port Usage" href="../ports/xcat_ports.html"/>
        <link rel="prev" title="PDUs" href="index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> xCAT
          

          
          </a>

          
            
            
              <div class="version">
                2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/install-guides/index.html">Install Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guides/admin-guides/index.html">Admin Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Advanced Topics</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../chain/index.html">Chain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_maintenance/index.html">Cluster Maintenance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../confluent/index.html">Confluent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docker/index.html">Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../domain_name_resolution/index.html">Domain Name Resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gpu/index.html">GPUs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hamn/index.html">High Availability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hierarchy/index.html">Hierarchical Clusters / Large Cluster Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kit/index.html">Software Kits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mixed_cluster/index.html">Mixed Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../networks/index.html">Networks</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">PDUs</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="">PDU</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#define-pdu-objects">Define PDU Objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="#define-pdu-attribute">Define PDU Attribute</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pdu-commands">PDU Commands</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ports/xcat_ports.html">Port Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../probe/index.html">xCAT probe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../raid/index.html">RAID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../restapi/index.html">Rest API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../security/index.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../softlayer/index.html">SoftLayer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../switches/index.html">Switch Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sysclone/index.html">System Clone (sysclone)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zones/index.html">Zones</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/index.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../help.html">Need Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Notices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">xCAT</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Advanced Topics</a> &raquo;</li>
      
          <li><a href="index.html">PDUs</a> &raquo;</li>
      
    <li>PDU</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/advanced/pdu/pdu.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pdu">
<h1>PDU<a class="headerlink" href="#pdu" title="Permalink to this headline">¶</a></h1>
<p>xCAT provides basic remote management for each power outlet plugged into the PDUs using SNMP communication.  This documentation will focus on configuration of the PDU and Node objects to allow xCAT to control power at the PDU outlet level.</p>
<div class="section" id="define-pdu-objects">
<h2>Define PDU Objects<a class="headerlink" href="#define-pdu-objects" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Define pdu object</p>
<div class="highlight-python"><div class="highlight"><pre>mkdef f5pdu3 groups=pdu ip=50.0.0.8 mgt=pdu nodetype=pdu
</pre></div>
</div>
</li>
<li><p class="first">Add hostname to /etc/hosts:</p>
<div class="highlight-python"><div class="highlight"><pre>makehosts f5pdu3
</pre></div>
</div>
</li>
<li><p class="first">Verify the SNMP command responds against the PDU:</p>
<div class="highlight-python"><div class="highlight"><pre>snmpwalk -v1 -cpublic -mALL f5pdu3 .1.3.6.1.2.1.1
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="define-pdu-attribute">
<h2>Define PDU Attribute<a class="headerlink" href="#define-pdu-attribute" title="Permalink to this headline">¶</a></h2>
<p>Administrators will need to know the exact mapping of the outlets to each server in the frame.  xCAT cannot validate the physical cable is connected to the correct server.</p>
<p>Add a <code class="docutils literal"><span class="pre">pdu</span></code> attribute to the compute node definition in the form &#8220;PDU_Name:outlet&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre>#
# Compute server cn01 has two power supplies
# connected to outlet 6 and 7 on pdu=f5pdu3
#
chdef cn01 pdu=f5pdu3:6,f5pdu3:7
</pre></div>
</div>
<p>Verify the setting: <code class="docutils literal"><span class="pre">lsdef</span> <span class="pre">cn01</span> <span class="pre">-i</span> <span class="pre">pdu</span></code></p>
</div>
<div class="section" id="pdu-commands">
<h2>PDU Commands<a class="headerlink" href="#pdu-commands" title="Permalink to this headline">¶</a></h2>
<p>The following commands are supported against a compute node:</p>
<blockquote>
<div><ul>
<li><p class="first">Check the pdu status for a compute node:</p>
<div class="highlight-python"><div class="highlight"><pre># rpower cn01 pdustat
  cn01: f5pdu3 outlet 6 is on
  cn01: f5pdu3 outlet 7 is on
</pre></div>
</div>
</li>
<li><p class="first">Power off the PDU outlets on a compute node:</p>
<div class="highlight-python"><div class="highlight"><pre># rpower cn01 pduoff
  cn01: f5pdu3 outlet 6 is off
  cn01: f5pdu3 outlet 7 is off
</pre></div>
</div>
</li>
<li><p class="first">Power on the PDU outlets on a compute node:</p>
<div class="highlight-python"><div class="highlight"><pre># rpower cn01 pduon
  cn01: f5pdu3 outlet 6 is on
  cn01: f5pdu3 outlet 7 is on
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p>The following commands are supported against a PDU:</p>
<blockquote>
<div><ul>
<li><p class="first">Check the status of the full PDU:</p>
<div class="highlight-python"><div class="highlight"><pre># rinv f5pdu3
  f5pdu3: outlet 1 is on
  f5pdu3: outlet 2 is on
  f5pdu3: outlet 3 is on
  f5pdu3: outlet 4 is on
  f5pdu3: outlet 5 is on
  f5pdu3: outlet 6 is off
  f5pdu3: outlet 7 is off
  f5pdu3: outlet 8 is on
  f5pdu3: outlet 9 is on
  f5pdu3: outlet 10 is on
  f5pdu3: outlet 11 is on
  f5pdu3: outlet 12 is on
</pre></div>
</div>
</li>
<li><p class="first">Power off the full PDU:</p>
<div class="highlight-python"><div class="highlight"><pre># rpower f5pdu3 off
  f5pdu3: outlet 1 is off
  f5pdu3: outlet 2 is off
  f5pdu3: outlet 3 is off
  f5pdu3: outlet 4 is off
  f5pdu3: outlet 5 is off
  f5pdu3: outlet 6 is off
  f5pdu3: outlet 7 is off
  f5pdu3: outlet 8 is off
  f5pdu3: outlet 9 is off
  f5pdu3: outlet 10 is off
  f5pdu3: outlet 11 is off
  f5pdu3: outlet 12 is off
</pre></div>
</div>
</li>
<li><p class="first">Power on the full PDU:</p>
<div class="highlight-python"><div class="highlight"><pre># rpower f5pdu3 on
  f5pdu3: outlet 1 is on
  f5pdu3: outlet 2 is on
  f5pdu3: outlet 3 is on
  f5pdu3: outlet 4 is on
  f5pdu3: outlet 5 is on
  f5pdu3: outlet 6 is on
  f5pdu3: outlet 7 is on
  f5pdu3: outlet 8 is on
  f5pdu3: outlet 9 is on
  f5pdu3: outlet 10 is on
  f5pdu3: outlet 11 is on
  f5pdu3: outlet 12 is on
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p><strong>Note:</strong> For BMC based compute nodes, turning the PDU outlet power on does not automatically power on the compute side.  Users will need to issue <code class="docutils literal"><span class="pre">rpower</span> <span class="pre">&lt;node&gt;</span> <span class="pre">on</span></code> to power on the compute node after the BMC boots.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../ports/xcat_ports.html" class="btn btn-neutral float-right" title="Port Usage" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="PDUs" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, IBM Corporation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2.12',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>