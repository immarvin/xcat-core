

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Ubuntu 14.04.3 &mdash; xCAT 2.12 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="xCAT 2.12 documentation" href="../../../../index.html"/>
        <link rel="up" title="Create osimage definitions" href="index.html"/>
        <link rel="next" title="Postscripts" href="postscripts.html"/>
        <link rel="prev" title="RHEL 7.2 LE" href="rhels.html"/> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> xCAT
          

          
          </a>

          
            
            
              <div class="version">
                2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../overview/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../guides/install-guides/index.html">Install Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../guides/admin-guides/index.html">Admin Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Advanced Topics</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../chain/index.html">Chain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../cluster_maintenance/index.html">Cluster Maintenance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../confluent/index.html">Confluent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../docker/index.html">Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../domain_name_resolution/index.html">Domain Name Resolution</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">GPUs</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">NVIDIA CUDA</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../repo/index.html">Create CUDA software repository</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">Create osimage definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../deploy_cuda_node.html">Deploy CUDA nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../verify_cuda_install.html">Verify CUDA Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../management.html">GPU Management and Monitoring</a></li>
<li class="toctree-l4"><a class="reference internal" href="../update_nvidia_driver.html">Update NVIDIA Driver</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../hamn/index.html">High Availability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../hierarchy/index.html">Hierarchical Clusters / Large Cluster Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../kit/index.html">Software Kits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../mixed_cluster/index.html">Mixed Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../networks/index.html">Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ports/xcat_ports.html">Port Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../probe/index.html">xCAT probe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../raid/index.html">RAID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../restapi/index.html">Rest API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../security/index.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../softlayer/index.html">SoftLayer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../switches/index.html">Switch Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../sysclone/index.html">System Clone (sysclone)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../zones/index.html">Zones</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../troubleshooting/index.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developers/index.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../help.html">Need Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../security/index.html">Security Notices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../index.html">xCAT</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../../index.html">Advanced Topics</a> &raquo;</li>
      
          <li><a href="../../index.html">GPUs</a> &raquo;</li>
      
          <li><a href="../index.html">NVIDIA CUDA</a> &raquo;</li>
      
          <li><a href="index.html">Create osimage definitions</a> &raquo;</li>
      
    <li>Ubuntu 14.04.3</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../_sources/advanced/gpu/nvidia/osimage/ubuntu.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ubuntu-14-04-3">
<h1>Ubuntu 14.04.3<a class="headerlink" href="#ubuntu-14-04-3" title="Permalink to this headline">¶</a></h1>
<div class="section" id="diskful-images">
<h2>Diskful images<a class="headerlink" href="#diskful-images" title="Permalink to this headline">¶</a></h2>
<p>The following examples will create diskful images for <code class="docutils literal"><span class="pre">cudafull</span></code> and <code class="docutils literal"><span class="pre">cudaruntime</span></code>.  The osimage definitions will be created from the base <code class="docutils literal"><span class="pre">ubuntu14.04.3-ppc64el-install-compute</span></code> osimage.</p>
<p>xCAT provides a sample package list files for CUDA. You can find them at:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">/opt/xcat/share/xcat/install/ubuntu/cudafull.ubuntu14.04.3.ppc64el.pkglist</span></code></li>
<li><code class="docutils literal"><span class="pre">/opt/xcat/share/xcat/install/ubuntu/cudaruntime.ubuntu14.04.3.ppc64el.pkglist</span></code></li>
</ul>
</div></blockquote>
<p><strong>[diskful note]</strong>: There is a requirement to reboot the machine after the CUDA drivers are installed.  To satisfy this requirement, the CUDA software is installed in the <code class="docutils literal"><span class="pre">pkglist</span></code> attribute of the osimage definition where the reboot happens after the Operating System is installed.</p>
<div class="section" id="cudafull">
<h3>cudafull<a class="headerlink" href="#cudafull" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Create a copy of the <code class="docutils literal"><span class="pre">install-compute</span></code> image and label it <code class="docutils literal"><span class="pre">cudafull</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>lsdef -t osimage -z ubuntu14.04.3-ppc64el-install-compute \
  | sed &#39;s/install-compute:/install-cudafull:/&#39; \
  | mkdef -z
</pre></div>
</div>
</li>
<li><p class="first">Add the CUDA repo created in the previous step to the <code class="docutils literal"><span class="pre">pkgdir</span></code> attribute.</p>
<p>If your Management Node IP is 10.0.0.1, the URL for the repo would be <code class="docutils literal"><span class="pre">http://10.0.0.1/install/cuda-repo/ppc64el/var/cuda-repo-7-5-local</span></code>, add it to the pkgdir:</p>
<div class="highlight-python"><div class="highlight"><pre>chdef -t osimage -o ubuntu14.04.3-ppc64el-install-cudafull \
 -p pkgdir=http://10.0.0.1/install/cuda-repo/ppc64el/var/cuda-repo-7-5-local
</pre></div>
</div>
<p><strong>TODO:</strong> Need to add Ubuntu Port?  &#8220;<a class="reference external" href="http://ports.ubuntu.com/ubuntu-ports">http://ports.ubuntu.com/ubuntu-ports</a> trusty main,http://ports.ubuntu.com/ubuntu-ports trusty-updates main&#8221;</p>
</li>
<li><p class="first">Use the provided <code class="docutils literal"><span class="pre">cudafull</span></code> pkglist to install the CUDA packages:</p>
<div class="highlight-python"><div class="highlight"><pre>chdef -t osimage -o ubuntu14.04.3-ppc64el-install-cudafull \
pkglist=/opt/xcat/share/xcat/install/ubuntu/cudafull.ubuntu14.04.3.ppc64el.pkglist
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="cudaruntime">
<h3>cudaruntime<a class="headerlink" href="#cudaruntime" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Create a copy of the <code class="docutils literal"><span class="pre">install-compute</span></code> image and label it <code class="docutils literal"><span class="pre">cudaruntime</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>lsdef -t osimage -z ubuntu14.04.3-ppc64el-install-compute \
  | sed &#39;s/install-compute:/install-cudaruntime:/&#39; \
  | mkdef -z
</pre></div>
</div>
</li>
<li><p class="first">Add the CUDA repo created in the previous step to the <code class="docutils literal"><span class="pre">pkgdir</span></code> attribute:</p>
<p>If your Management Node IP is 10.0.0.1, the URL for the repo would be <code class="docutils literal"><span class="pre">http://10.0.0.1/install/cuda-repo/ppc64el/var/cuda-repo-7-5-local</span></code>, add it to the pkgdir:</p>
<div class="highlight-python"><div class="highlight"><pre>chdef -t osimage -o ubuntu14.04.3-ppc64el-install-cudaruntime \
 -p pkgdir=http://10.0.0.1/install/cuda-repo/ppc64el/var/cuda-repo-7-5-local
</pre></div>
</div>
<p><strong>TODO:</strong> Need to add Ubuntu Port?  &#8220;<a class="reference external" href="http://ports.ubuntu.com/ubuntu-ports">http://ports.ubuntu.com/ubuntu-ports</a> trusty main,http://ports.ubuntu.com/ubuntu-ports trusty-updates main&#8221;</p>
</li>
<li><p class="first">Use the provided <code class="docutils literal"><span class="pre">cudaruntime</span></code> pkglist to install the CUDA packages:</p>
<div class="highlight-python"><div class="highlight"><pre>chdef -t osimage -o ubuntu14.04.3-ppc64el-install-cudaruntime \
pkglist=/opt/xcat/share/xcat/install/ubuntu/cudaruntime.ubuntu14.04.3.ppc64el.pkglist
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="diskless-images">
<h2>Diskless images<a class="headerlink" href="#diskless-images" title="Permalink to this headline">¶</a></h2>
<p>The following examples will create diskless images for <code class="docutils literal"><span class="pre">cudafull</span></code> and <code class="docutils literal"><span class="pre">cudaruntime</span></code>.  The osimage definitions will be created from the base <code class="docutils literal"><span class="pre">ubuntu14.04.3-ppc64el-netboot-compute</span></code> osimage.</p>
<p>xCAT provides a sample package list files for CUDA. You can find them at:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">/opt/xcat/share/xcat/netboot/ubuntu/cudafull.ubuntu14.04.3.ppc64el.pkglist</span></code></li>
<li><code class="docutils literal"><span class="pre">/opt/xcat/share/xcat/netboot/ubuntu/cudaruntime.ubuntu14.04.3.ppc64el.pkglist</span></code></li>
</ul>
</div></blockquote>
<p><strong>[diskless note]</strong>: For diskless images, the requirement for rebooting the machine is not applicable because the images is loaded on each reboot.  The install of the CUDA packages is required to be done in the <code class="docutils literal"><span class="pre">otherpkglist</span></code> <strong>NOT</strong> the <code class="docutils literal"><span class="pre">pkglist</span></code>.</p>
<div class="section" id="id1">
<h3>cudafull<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Create a copy of the <code class="docutils literal"><span class="pre">netboot-compute</span></code> image and label it <code class="docutils literal"><span class="pre">cudafull</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>lsdef -t osimage -z ubuntu14.04.3-ppc64el-netboot-compute \
  | sed &#39;s/netboot-compute:/netboot-cudafull:/&#39; \
  | mkdef -z
</pre></div>
</div>
</li>
<li><p class="first">Add the CUDA repo created in the previous step to the <code class="docutils literal"><span class="pre">otherpkgdir</span></code> attribute.</p>
<p>If your Management Node IP is 10.0.0.1, the URL for the repo would be <code class="docutils literal"><span class="pre">http://10.0.0.1/install/cuda-repo/ppc64el/var/cuda-repo-7-5-local</span></code>, add it to the <code class="docutils literal"><span class="pre">otherpkgdir</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>chdef -t osimage -o ubuntu14.04.3-ppc64el-netboot-cudafull \
otherpkgdir=http://10.0.0.1/install/cuda-repo/ppc64el/var/cuda-repo-7-5-local
</pre></div>
</div>
</li>
<li><p class="first">Add the provided <code class="docutils literal"><span class="pre">cudafull</span></code> otherpkg.pkglist file to install the CUDA packages:</p>
<div class="highlight-python"><div class="highlight"><pre>chdef -t osimage -o ubuntu14.04.3-ppc64el-netboot-cudafull \
otherpkglist=/opt/xcat/share/xcat/netboot/ubuntu/cudafull.otherpkgs.pkglist
</pre></div>
</div>
<p><strong>TODO:</strong> Need to add Ubuntu Port?  &#8220;<a class="reference external" href="http://ports.ubuntu.com/ubuntu-ports">http://ports.ubuntu.com/ubuntu-ports</a> trusty main,http://ports.ubuntu.com/ubuntu-ports trusty-updates main&#8221;</p>
</li>
<li><p class="first">Verify that <code class="docutils literal"><span class="pre">acpid</span></code> is installed on the Management Node or on the Ubuntu host where you are generating the diskless image:</p>
<div class="highlight-python"><div class="highlight"><pre>apt-get install -y acpid
</pre></div>
</div>
</li>
<li><p class="first">Generate the image:</p>
<div class="highlight-python"><div class="highlight"><pre>genimage ubuntu14.04.3-ppc64el-netboot-cudafull
</pre></div>
</div>
</li>
<li><p class="first">Package the image:</p>
<div class="highlight-python"><div class="highlight"><pre>packimage ubuntu14.04.3-ppc64el-netboot-cudafull
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="id2">
<h3>cudaruntime<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Create a copy of the <code class="docutils literal"><span class="pre">netboot-compute</span></code> image and label it <code class="docutils literal"><span class="pre">cudaruntime</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>lsdef -t osimage -z ubuntu14.04.3-ppc64el-netboot-compute \
  | sed &#39;s/netboot-compute:/netboot-cudaruntime:/&#39; \
  | mkdef -z
</pre></div>
</div>
</li>
<li><p class="first">Add the CUDA repo created in the previous step to the <code class="docutils literal"><span class="pre">otherpkgdir</span></code> attribute.</p>
<p>If your Management Node IP is 10.0.0.1, the URL for the repo would be <code class="docutils literal"><span class="pre">http://10.0.0.1/install/cuda-repo/ppc64el/var/cuda-repo-7-5-local</span></code>, add it to the <code class="docutils literal"><span class="pre">otherpkgdir</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>chdef -t osimage -o ubuntu14.04.3-ppc64el-netboot-cudaruntime  \
otherpkgdir=http://10.0.0.1/install/cuda-repo/ppc64el/var/cuda-repo-7-5-local
</pre></div>
</div>
</li>
<li><p class="first">Add the provided <code class="docutils literal"><span class="pre">cudaruntime</span></code> otherpkg.pkglist file to install the CUDA packages:</p>
<div class="highlight-python"><div class="highlight"><pre>chdef -t osimage -o ubuntu14.04.3-ppc64el-netboot-cudaruntime \
otherpkglist=/opt/xcat/share/xcat/netboot/ubuntu/cudaruntime.otherpkgs.pkglist
</pre></div>
</div>
<p><strong>TODO:</strong> Need to add Ubuntu Port?  &#8220;<a class="reference external" href="http://ports.ubuntu.com/ubuntu-ports">http://ports.ubuntu.com/ubuntu-ports</a> trusty main,http://ports.ubuntu.com/ubuntu-ports trusty-updates main&#8221;</p>
</li>
<li><p class="first">Verify that <code class="docutils literal"><span class="pre">acpid</span></code> is installed on the Management Node or on the Ubuntu host where you are generating the diskless image:</p>
<div class="highlight-python"><div class="highlight"><pre>apt-get install -y acpid
</pre></div>
</div>
</li>
<li><p class="first">Generate the image:</p>
<div class="highlight-python"><div class="highlight"><pre>genimage ubuntu14.04.3-ppc64el-netboot-cudaruntime
</pre></div>
</div>
</li>
<li><p class="first">Package the image:</p>
<div class="highlight-python"><div class="highlight"><pre>packimage ubuntu14.04.3-ppc64el-netboot-cudaruntime
</pre></div>
</div>
</li>
</ol>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="postscripts.html" class="btn btn-neutral float-right" title="Postscripts" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rhels.html" class="btn btn-neutral" title="RHEL 7.2 LE" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, IBM Corporation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'2.12',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>